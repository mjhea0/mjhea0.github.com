<!DOCTYPE html>
<html lang="en">

  <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Flask for Node Developers</title>
  <meta name="description" content="Let&#39;s build a RESTful API with Python and Flask.">
  
    
    <meta name="keywords" content="python, flask, RESTful API, CRUD">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://mherman.org/blog/flask-for-node-developers/">
  
  
  <link rel="alternate" type="application/rss+xml" title="Michael Herman" href="https://mherman.org/feed.xml">

  <link rel="icon" type="image/png" href="/favicon.png">


  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="Flask for Node Developers">
  <meta name="twitter:description" content="Let&#39;s build a RESTful API with Python and Flask.">
  
  

  <script type="text/javascript">
  WebFontConfig = {
    google: { families: [ 'Bitter:400,700,400italic:latin' ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  
    
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-37074204-1', 'auto');
    ga('send', 'pageview');
  </script>


  
</head>


  <link rel="stylesheet" href="/assets/hello.css">
  <link rel="stylesheet" href="/assets/carbon.css">

  <body>

    <header class="site-header">

  <div class="color-bar">
    <div class="bar bar1"></div>
    <div class="bar bar2"></div>
    <div class="bar bar3"></div>
    <div class="bar bar4"></div>
    <div class="bar bar5"></div>
    <div class="bar bar6"></div>
  </div>

  <div class="wrapper">

    <a class="site-title" href="/">Michael Herman</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/">Blog</a>
      
        
        <a class="page-link" href="/about">About</a>
      
        
        <a class="page-link" href="/talks">Talks</a>
      
        
        <a class="page-link" href="/feed.xml">RSS</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7DT27Y&placement=mhermanorg" id="_carbonads_js"></script>
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    
      <h1 class="post-title" itemprop="name headline">Flask for Node Developers</h1>
    
    <p class="post-meta">
      Last updated: <time datetime="2017-04-26T00:00:00-04:00" itemprop="datePublished">Apr 26, 2017</time>
       • 
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/node/">node</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
      <a href="/categories/python/">python</a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

</p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Today we’ll be going through how to build a basic CRUD server-side application using Python and <a href="http://flask.pocoo.org/">Flask</a>, geared toward JavaScript developers versed in Node and Express. Similar to <a href="https://expressjs.com/">Express</a>, <a href="http://flask.pocoo.org/">Flask</a> is a simple, yet powerful micro-framework for Python, perfect for RESTful APIs.</p>

<div style="text-align:center;">
  <img src="/assets/img/blog/flask-node.png" style="max-width: 100%; border:0; box-shadow: none;" alt="flask and node" />
</div>

<p><br /></p>

<blockquote>
  <p>This tutorial uses Flask v<a href="https://pypi.python.org/pypi/Flask/0.12.1">0.12.1</a> and Python v<a href="https://www.python.org/downloads/release/python-361/">3.6.1</a>.</p>
</blockquote>

<h2 class="no_toc" id="contents">Contents</h2>

<ul id="markdown-toc">
  <li><a href="#objectives" id="markdown-toc-objectives">Objectives</a></li>
  <li><a href="#project-setup" id="markdown-toc-project-setup">Project Setup</a></li>
  <li><a href="#database-setup" id="markdown-toc-database-setup">Database Setup</a></li>
  <li><a href="#routes" id="markdown-toc-routes">Routes</a></li>
  <li><a href="#next-steps" id="markdown-toc-next-steps">Next Steps</a></li>
</ul>

<h2 id="objectives">Objectives</h2>

<p>By the end of this tutorial, you should be able to…</p>

<ol>
  <li>Set up a Python development environment</li>
  <li>Create and activate a virtual environment</li>
  <li>Using SQLite, apply a schema to the database and interact with the database using the basic CRUD functions</li>
  <li>Build a CRUD app using Python and Flask</li>
</ol>

<h2 id="project-setup">Project Setup</h2>

<p>Before we start, ensure that you have <a href="https://www.python.org/downloads/release/python-361/">Python v3.6.1</a> installed.</p>

<p>Along with Python, we also need <a href="https://pypi.python.org/pypi/pip">pip</a> to install third-party packages from the <a href="https://pypi.org/">Python Package Index</a> (aka PyPI), the Python equivalent of npm. Fortunately, this comes pre-installed with all Python versions &gt;= 3.4.</p>

<p>Let’s start by creating a new project directory:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mkdir flask-songs-api <span class="o">&amp;&amp;</span> <span class="nb">cd </span>flask-songs-api
</code></pre></div></div>

<p>Next up, we’ll create an isolated virtual environment for installing Python packages specific to our individual project. It’s <a href="https://www.python.org/dev/peps/pep-0405/#isolation-from-system-site-packages">standard practice</a> to set up a virtual environment for each project, otherwise there can be compatibility issues with different dependencies.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python3.6 <span class="nt">-m</span> venv env
</code></pre></div></div>

<p>Next, we need to activate it:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">source </span>env/bin/activate
</code></pre></div></div>

<p>You should now see <code class="highlighter-rouge">env</code> in your prompt, indicating that the virtual environment is activated.</p>

<blockquote>
  <p><strong>NOTE:</strong> Ready to stop developing? Use the <code class="highlighter-rouge">deactivate</code> command to deactivate the virtual environment. To activate it again, navigate to the directory and re-run the source command - <code class="highlighter-rouge">source env/bin/activate</code>.</p>
</blockquote>

<p>Now we can install Flask:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pip install <span class="nv">Flask</span><span class="o">==</span>0.12.1
<span class="nv">$ </span>pip freeze <span class="o">&gt;</span> requirements.txt
</code></pre></div></div>

<p>Now is a great time to add a <em>.gitignore</em>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>env
*.db
</code></pre></div></div>

<p>Finally, let’s add a main app file, which will handle routing and run our application, along with a file to setup our database schema:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>touch app.py models.py
</code></pre></div></div>

<h2 id="database-setup">Database Setup</h2>

<p>For this tutorial, we will be using <a href="https://www.sqlite.org/">SQLite3</a> since it’s part of the <a href="https://docs.python.org/3.5/library/sqlite3.html">Python standard library</a>, requires little (if any) configuration, and is powerful enough for small to mid-size applications (e.g., the majority of web apps).</p>

<p>Start by creating a new database file in your project root:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>touch songs.db
</code></pre></div></div>

<p>Now start a new SQLite session:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>sqlite3 songs.db
</code></pre></div></div>

<p>Then run:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sqlite&gt; .databases
</code></pre></div></div>

<p>You should see a file path to your database file, which is empty at the moment and ready for us to create a schema and data to. To create a schema, add the following code to <em>models.py</em>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sqlite3</span>


<span class="k">def</span> <span class="nf">drop_table</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'songs.db'</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"""DROP TABLE IF EXISTS songs;"""</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">True</span>


<span class="k">def</span> <span class="nf">create_db</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'songs.db'</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">table</span> <span class="o">=</span> <span class="s">"""CREATE TABLE songs(
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            artist TEXT NOT NULL,
            title TEXT NOT NULL,
            rating INTEGER NOT NULL
        );
        """</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">True</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">drop_table</span><span class="p">()</span>
    <span class="n">create_db</span><span class="p">()</span>
</code></pre></div></div>

<p>This will drop the songs table if it exists and put a new one in place with the schema we’ve defined here. If you have any issues with your database later on, or if you just want to start fresh, you can always run this script to recreate the database. Back in the terminal, exit SQLite and then run the script to create our table:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sqlite&gt; .exit
<span class="nv">$ </span>python models.py
</code></pre></div></div>

<p>Let’s check if that actually worked:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>sqlite3 songs.db
sqlite&gt; .table
songs
sqlite&gt; .schema
CREATE TABLE songs<span class="o">(</span>
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            artist TEXT NOT NULL,
            title TEXT NOT NULL,
            rating INTEGER NOT NULL
        <span class="o">)</span><span class="p">;</span>
sqlite&gt; .exit
</code></pre></div></div>

<p>Great! So, now that our database is set up correctly, we can move on to setting up our app’s route handlers. For this post, we won’t be going into database migrations but if you ever want to change the schema, you can use <a href="https://flask-migrate.readthedocs.io/en/latest/">Flask-Migrate</a>.</p>

<h2 id="routes">Routes</h2>

<p>Let’s start with an overview of the routes, following RESTful principles:</p>

<table>
  <thead>
    <tr>
      <th>Endpoint</th>
      <th>Result</th>
      <th>CRUD</th>
      <th>HTTP</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">/api/songs</code></td>
      <td>Returns all songs</td>
      <td>Read</td>
      <td>GET</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/api/song/&lt;song_id&gt;</code></td>
      <td>Returns a single song</td>
      <td>Read</td>
      <td>GET</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/api/songs</code></td>
      <td>Adds a single song</td>
      <td>Create</td>
      <td>POST</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/api/song/&lt;song_id&gt;</code></td>
      <td>Updates a single song</td>
      <td>Update</td>
      <td>PUT</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/api/song/&lt;song_id&gt;</code></td>
      <td>Deletes a single song</td>
      <td>Delete</td>
      <td>DELETE</td>
    </tr>
  </tbody>
</table>

<p>But first, before creating any routes, add the following code to <em>app.py</em>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div></div>

<p>Here we imported <code class="highlighter-rouge">sqlite3</code> along with the main <a href="http://flask.pocoo.org/docs/0.12/api/#application-object">Flask application object</a>, <code class="highlighter-rouge">Flask</code>, which creates an instance of Flask in our application. The Flask application object acts as the central object, which we can use as a way of calling our view functions, adding our URL rules, template configuration and much more. With that instance we can run the application using the <code class="highlighter-rouge">run</code> <a href="http://flask.pocoo.org/docs/0.12/api/#flask.Flask.run">method</a>. We also set the <a href="http://flask.pocoo.org/docs/0.12/api/#flask.Flask.debug">debug flag</a> to <code class="highlighter-rouge">True</code> so that the server live reloads when code changes and provides an interactive debugger when an exception is thrown.</p>

<blockquote>
  <p><strong>NOTE:</strong> <code class="highlighter-rouge">if __name__ == '__main__'</code> states that this source file is our main program. Any files imported from other modules will have their name set to their module name. This is because you may sometimes have modules that could be executed directly as well as be imported into a main app file. This line means that the code in those modules will only execute when you want to run the module as a program, and not have it execute when someone just wants to import a module and execute it themselves.</p>
</blockquote>

<p>Finally, it’s important to note that any imports must go at the top of our <em>app.py</em> file. These must come before anything else in order to be used later on in our file.</p>

<p>Now, add the routes:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>


<span class="nd">@app.route</span><span class="p">(</span><span class="s">'/api/songs'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">collection</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c"># Handle GET all Request</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c"># Handle POST request</span>


<span class="nd">@app.route</span><span class="p">(</span><span class="s">'/api/song/&lt;song_id&gt;'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'PUT'</span><span class="p">,</span> <span class="s">'DELETE'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">resource</span><span class="p">(</span><span class="n">song_id</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c"># Handle GET single request</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'PUT'</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c"># Handle UPDATE request</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'DELETE'</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c"># Handle DELETE request</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div></div>

<p>We imported <code class="highlighter-rouge">request</code>, which handles, well, HTTP requests (no surprises there). Let’s look at each method, staring with a POST:</p>

<h3 id="post">POST</h3>

<p>The first thing we need to do is add data to our database. Once we’ve done this, we can start building and testing the rest of our database/CRUD functions.</p>

<p>The process is simple:</p>

<ol>
  <li>Create a connection to our database</li>
  <li>Execute our SQL query to add a song</li>
  <li>Commit the changes to the database</li>
  <li>Close the database connection</li>
  <li>Return an object</li>
</ol>

<p>We can write a single function to handle this. Let’s place all helper functions underneath the routes, to keep things nicely separated:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># helper functions</span>

<span class="k">def</span> <span class="nf">add_song</span><span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">rating</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'songs.db'</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"""
                INSERT INTO songs (artist, title, rating) values (?, ?, ?);
                """</span><span class="p">,</span> <span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">rating</span><span class="p">,))</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s">'status'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'message'</span><span class="p">:</span> <span class="s">'Song Added'</span><span class="p">}</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s">'status'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">'message'</span><span class="p">:</span> <span class="s">'error'</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>

<p>Now we can just use this function in our route handler, passing the correct arguments from an incoming POST request:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/api/songs'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">collection</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c"># Handle GET all Request</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">add_song</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">'artist'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">'title'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">'rating'</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></div>

<p>So, we grabbed the values from the incoming form request, then called the <code class="highlighter-rouge">add_song()</code> function to add that song to the database, and, finally, returned the appropriate JSON response.</p>

<p>Make sure to add <code class="highlighter-rouge">jsonify</code> to the imports in order to send a JSON response back:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">jsonify</span>
</code></pre></div></div>

<p>Ready to test? Start the server in one terminal window:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python app.py
</code></pre></div></div>

<p>Now, in another window use CURL to send a POST request:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">--data</span> <span class="s2">"artist='Hudson Mohawke'&amp;title='Cbat'&amp;rating=5"</span> http://localhost:5000/api/songs
</code></pre></div></div>

<p>If all went well, you should see the following response, indicating that the song was added to the database:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>
  <span class="s2">"message"</span>: <span class="s2">"Song Added"</span>,
  <span class="s2">"status"</span>: 1
<span class="o">}</span>
</code></pre></div></div>

<p>Just to be on the safe side, let’s double-check that. Kill the server, then open a SQLite session from within your project directory:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>sqlite3 songs.db
</code></pre></div></div>

<p>Now run the following SQL query:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sqlite&gt; SELECT <span class="k">*</span> FROM songs ORDER BY id desc<span class="p">;</span>
</code></pre></div></div>

<p>You should see:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1|'Hudson Mohawke'|'Cbat'|5`
</code></pre></div></div>

<p>Okay. We have officially added our first song! Add a couple more before moving on to reading data (GET). Don’t forget to run the Flask server before running the CURL commands!</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">--data</span> <span class="s2">"artist='Beastie Boys'&amp;title='Sabotage'&amp;rating=4"</span> http://localhost:5000/api/songs
<span class="nv">$ </span>curl <span class="nt">--data</span> <span class="s2">"artist='Gregori Klosman'&amp;title='Jaws'&amp;rating=3"</span> http://localhost:5000/api/songs
</code></pre></div></div>

<h3 id="get">GET</h3>

<p>We’ll start with our GET all route, e.g. - <code class="highlighter-rouge">api/songs</code>. We need to connect to the database, execute the appropriate SQL query, and then return all of the songs from that query:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_all_songs</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'songs.db'</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"SELECT * FROM songs ORDER BY id desc"</span><span class="p">)</span>
        <span class="n">all_songs</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">all_songs</span>
</code></pre></div></div>

<p>Next up, we have to change our route handler to now call this function and then send back JSON:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/api/songs'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">collection</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="n">all_songs</span> <span class="o">=</span> <span class="n">get_all_songs</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">all_songs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">add_song</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">'artist'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">'title'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">'rating'</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></div>

<p>Did you notice that we’re using the <code class="highlighter-rouge">json</code> module? This is also from the Python standard library, which allows us to convert the ‘list’-like format of data we get back from SQLite3 into a JSON object. Just don’t forget to import it:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">json</span>
</code></pre></div></div>

<p>To test, we can simply navigate to <a href="http://127.0.0.1:5000/api/songs">http://127.0.0.1:5000/api/songs</a> in the browser to check if all our songs are there.</p>

<p>You should see something like:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">[</span><span class="w">
    </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"'Gregori Klosman'"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"'Jaws'"</span><span class="p">,</span><span class="w">
    </span><span class="mi">3</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="p">[</span><span class="w">
    </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"'Beastie Boys'"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"'Sabotage'"</span><span class="p">,</span><span class="w">
    </span><span class="mi">4</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="p">[</span><span class="w">
    </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"'Hudson Mohawke'"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"'Cbat'"</span><span class="p">,</span><span class="w">
    </span><span class="mi">5</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>Now that we can GET all songs, let’s build a function to GET just a single song. This function will take a parameter of <code class="highlighter-rouge">song_id</code>, create a connection to our database, find that song with a SQL query, and then return that song with JSON:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_single_song</span><span class="p">(</span><span class="n">song_id</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'songs.db'</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"SELECT * FROM songs WHERE id = ?"</span><span class="p">,</span> <span class="p">(</span><span class="n">song_id</span><span class="p">,))</span>
        <span class="n">song</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">song</span>
</code></pre></div></div>

<p>We can update our route with a <code class="highlighter-rouge">song_id</code> as a parameter, and send back the single song:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/api/song/&lt;song_id&gt;'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'PUT'</span><span class="p">,</span> <span class="s">'DELETE'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">resource</span><span class="p">(</span><span class="n">song_id</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="n">song</span> <span class="o">=</span> <span class="n">get_single_song</span><span class="p">(</span><span class="n">song_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">song</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'PUT'</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c"># Handle UPDATE request</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'DELETE'</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c"># Handle DELETE request</span>
</code></pre></div></div>

<p>If you now point your browser to <a href="http://127.0.0.1:5000/api/song/2">http://127.0.0.1:5000/api/song/2</a> you should see the JSON object for our song with an id of <code class="highlighter-rouge">2</code> in the database:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"'Beastie Boys'"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"'Sabotage'"</span><span class="p">,</span><span class="w">
    </span><span class="mi">4</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>If you try to put in an id that we don’t have in the database currently, you will just get <code class="highlighter-rouge">null</code> displayed on the page instead of a JSON object.</p>

<p>We can CREATE a song, READ all songs, and READ a single song. Only two more routes to go…</p>

<h3 id="put">PUT</h3>

<p>A major function that we’re missing is the ability to edit data that’s already present in our database. We do this using a PUT request by taking incoming data with an id passed through the URL, finding the object in our database with that particular id, and then updating it.</p>

<p>Let’s start with an edit function, which takes in the song id, artist, title, and rating as arguments:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">edit_song</span><span class="p">(</span><span class="n">song_id</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">rating</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'songs.db'</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"UPDATE songs SET artist = ?, title = ?, rating = ? WHERE ID = ?;"</span><span class="p">,</span> <span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">rating</span><span class="p">,</span> <span class="n">song_id</span><span class="p">,))</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s">'status'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'message'</span><span class="p">:</span> <span class="s">'SONG Edited'</span><span class="p">}</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s">'status'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">'message'</span><span class="p">:</span> <span class="s">'Error'</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>

<p>Now we can edit our route to pass in the data from the PUT request:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/api/song/&lt;song_id&gt;'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'PUT'</span><span class="p">,</span> <span class="s">'DELETE'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">resource</span><span class="p">(</span><span class="n">song_id</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="n">song</span> <span class="o">=</span> <span class="n">get_single_song</span><span class="p">(</span><span class="n">song_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">song</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'PUT'</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">edit_song</span><span class="p">(</span>
            <span class="n">song_id</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s">'artist'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">'title'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">'rating'</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'DELETE'</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c"># Handle DELETE request</span>
</code></pre></div></div>

<p>So if we test this route out with CURL:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-X</span> PUT <span class="nt">--data</span> <span class="s2">"artist='Van Halen'&amp;title='Hot for Teacher'&amp;rating=3"</span> localhost:5000/api/song/2
</code></pre></div></div>

<p>We should see:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>
  <span class="s2">"message"</span>: <span class="s2">"SONG Edited"</span>,
  <span class="s2">"status"</span>: 1
<span class="o">}</span>
</code></pre></div></div>

<p>We can (err, should) make sure that edit is reflected in the database:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>sqlite3 songs.db
sqlite&gt; SELECT <span class="k">*</span> FROM songs ORDER BY id desc<span class="p">;</span>

3|<span class="s1">'Gregori Klosman'</span>|<span class="s1">'Jaws'</span>|3
2|<span class="s1">'Van Halen'</span>|<span class="s1">'Hot for Teacher'</span>|3
1|<span class="s1">'Hudson Mohawke'</span>|<span class="s1">'Cbat'</span>|5
</code></pre></div></div>

<p>We can edit songs at will!</p>

<h3 id="delete">Delete</h3>

<p>The last thing we have left to do is our DELETE route. We need to be able to remove data from our database. Let’s first add in a song we can then delete using CURL in the terminal:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">--data</span> <span class="s2">"artist='The Flaming Lips'&amp;title='Buggin'&amp;rating=2"</span> http://localhost:5000/api/songs
</code></pre></div></div>

<p>Make sure it’s in our database:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>sqlite3 songs.db
sqlite&gt; SELECT <span class="k">*</span> FROM songs ORDER BY id desc<span class="p">;</span>

4|<span class="s1">'The Flaming Lips'</span>|<span class="s1">'Buggin'</span>|2
3|<span class="s1">'Gregori Klosman'</span>|<span class="s1">'Jaws'</span>|3
2|<span class="s1">'Van Halen'</span>|<span class="s1">'Hot for Teacher'</span>|3
1|<span class="s1">'Hudson Mohawke'</span>|<span class="s1">'Cbat'</span>|5
</code></pre></div></div>

<p>We need to build a delete function:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">delete_song</span><span class="p">(</span><span class="n">song_id</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'songs.db'</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"DELETE FROM songs WHERE ID = ?;"</span><span class="p">,</span> <span class="p">(</span><span class="n">song_id</span><span class="p">,))</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s">'status'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'message'</span><span class="p">:</span> <span class="s">'SONG Deleted'</span><span class="p">}</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s">'status'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">'message'</span><span class="p">:</span> <span class="s">'Error'</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>

<p>And now let’s add in our delete route:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/api/song/&lt;song_id&gt;'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'PUT'</span><span class="p">,</span> <span class="s">'DELETE'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">resource</span><span class="p">(</span><span class="n">song_id</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="n">song</span> <span class="o">=</span> <span class="n">get_single_song</span><span class="p">(</span><span class="n">song_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">song</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'PUT'</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">edit_song</span><span class="p">(</span>
            <span class="n">song_id</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s">'artist'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">'title'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">'rating'</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'DELETE'</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">delete_song</span><span class="p">(</span><span class="n">song_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></div>

<p>Test it with CURL:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-X</span> DELETE localhost:5000/api/song/4

<span class="o">{</span>
  <span class="s2">"message"</span>: <span class="s2">"SONG Deleted"</span>,
  <span class="s2">"status"</span>: 1
<span class="o">}</span>
</code></pre></div></div>

<p>And finally, go back into our database and really make sure it’s gone:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>sqlite3 songs.db
sqlite&gt; SELECT <span class="k">*</span> FROM songs ORDER BY id desc<span class="p">;</span>

3|<span class="s1">'Gregori Klosman'</span>|<span class="s1">'Jaws'</span>|3
2|<span class="s1">'Van Halen'</span>|<span class="s1">'Hot for Teacher'</span>|3
1|<span class="s1">'Hudson Mohawke'</span>|<span class="s1">'Cbat'</span>|5
</code></pre></div></div>

<p>Boom! So we now have all of our routes doing <em>exactly</em> what we want them to do. We can add songs, get the songs back (all, or just a single song), edit a song, and remove a song. That’s some quality CRUD right there.</p>

<h2 id="next-steps">Next Steps</h2>

<ol>
  <li><em>Error Handling</em>: The code we have right now is completely reliant on the data coming through correctly, but what if there’s something missing when the user sends a POST request? For example, what would happen if the artist name was missing? Right now we aren’t handling errors that may come up. Think about how we can send information back to the user if not all fields are present in the POST or PUT request, and how you could be clear in the error messages we send back to the user.</li>
  <li><em>Server-side Templating</em>: Build out your client-side by adding <a href="http://flask.pocoo.org/docs/0.12/quickstart/#static-files">static files</a> and <a href="http://flask.pocoo.org/docs/0.12/quickstart/#rendering-templates">templates</a>.</li>
  <li><em>Database Management:</em> Refactor SQLite and vanilla SQL out of your application and add in Postgres, <a href="http://flask-sqlalchemy.pocoo.org/2.1/">Flask-SQLAlchemy</a> (for communicating with the database), and <a href="https://flask-migrate.readthedocs.io/en/latest/">Flask-Migrate</a> (for migrations). Check out <a href="https://github.com/mjhea0/flask-songs-api/tree/master/_live">this example</a> of how to use Postgres and Flask-SQLAlchemy.</li>
</ol>

<p>Grab the code from the <a href="https://github.com/mjhea0/flask-songs-api">flask-songs-api</a> repo. Cheers!</p>

  </div>

  <!-- addthis -->
  
    <div class="sharing">
  <br>
  <!-- AddThis Button BEGIN -->
  <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
    <a class="addthis_button_preferred_1"></a>
    <a class="addthis_button_preferred_2"></a>
    <a class="addthis_button_preferred_3"></a>
    <a class="addthis_button_preferred_4"></a>
    <a class="addthis_button_compact"></a>
    <a class="addthis_counter addthis_bubble_style"></a>
  </div>
  <script type="text/javascript">var addthis_config = {"data_track_addressbar":false};</script>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50e5f1cc35ad077d"></script>
  <!-- AddThis Button END -->
  <br>
</div>

  

  <!-- disqus -->
  
    <div id="disqus_thread"></div>

<script>
  var disqus_config = function () {
    this.page.url = 'https://mherman.org/blog/flask-for-node-developers/';
    this.page.identifier = 'https://mherman.org/blog/flask-for-node-developers/';
  };

  (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//' + 'michaelherman' + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  


</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      




<div>
  <hr>
  <p>
    <span>Copyright &copy; 2020 - Michael Herman</span>
    <br>
    <small>Questions? michael at mherman dot org</small><br>
    <small><a href="#">Back to top</a></small>
    <br>
    <span>
      <a href="https://github.com/mjhea0"><i class="fa fa-github-square" style="font-size:2em" aria-hidden="true"></i></a>
      <a href="https://twitter.com/mikeherman"><i class="fa fa-twitter-square" style="font-size:2em" aria-hidden="true"></i></a>
      <a href="https://www.linkedin.com/in/mjhea0/"><i class="fa fa-linkedin-square" style="font-size:2em" aria-hidden="true"></i></a>
      <a href="https://www.youtube.com/hermanmu"><i class="fa fa-youtube-square" style="font-size:2em" aria-hidden="true"></i></a>
    </span>
  </p>
</div>

    </p>

  </div>

</footer>


  </body>

  <script type="text/javascript" src="/assets/hello.js"></script>
</html>
