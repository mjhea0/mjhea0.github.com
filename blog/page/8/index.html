
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Michael Herman</title>
  <meta name="author" content="Michael Herman">

  
  <meta name="description" content="This tutorial is meant for someone who&#8217;s finished a basic Hello World project with Node and Express and ready to take another step. In short, I &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mjhea0.github.com/blog/page/8">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/jquery.messagebar.min.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Michael Herman" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.messagebar.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37074204-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mjhea0.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2013/10/20/handling-ajax-calls-with-node-dot-js-and-express-scraping-craigslist/">Handling AJAX Calls With Node.js and Express (Scraping Craigslist)</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2013-10-20T01:12:00-06:00" pubdate data-updated="true">Oct 20<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This tutorial is meant for someone who&#8217;s finished a basic Hello World project with Node and Express and ready to take another step. In short, I&#8217;ll show you how to <strong>search/scrape/crawl Craigslist using AJAX along with Node and Express.</strong> I assume you&#8217;re working from a Unix-based environment, already have Node and Express installed, and understand how to navigate the terminal.</p>

<p>You can find the finished code on this <a href="https://github.com/mjhea0/node-express-ajax-craigslist">repo</a> if wish to bypass the tutorial altogether.</p>

<p>Let&#8217;s get right to it.</p>

<p>Here is an index of all the articles in the series that have been published to date:</p>

<ul>
<li>Part 1: <a href="http://mherman.org/blog/2013/10/20/handling-ajax-calls-with-node-dot-js-and-express-scraping-craigslist/">Scraping Craigslist</a> <strong>&lt;&lt; CURRENT</strong></li>
<li>Part 2: <a href="http://mherman.org/blog/2013/11/01/handling-ajax-calls-with-node-dot-js-and-express-part-2/">Adding Handlebars</a></li>
<li>Part 3: <a href="http://mherman.org/blog/2013/12/21/handling-ajax-calls-with-node-dot-js-and-express-part-3/">User Authentication with Passport and MongoDB</a></li>
<li>Part 4: <a href="http://mherman.org/blog/2014/04/15/handling-ajax-calls-with-node-dot-js-and-express-part-4/">Refactoring, Adding styles</a></li>
<li>Part 5: <a href="http://mherman.org/blog/2014/04/15/handling-ajax-calls-with-node-dot-js-and-express-part-5">Saving Jobs</a></li>
</ul>


<h2>Project Setup</h2>

<h4>Navigate to where you&#8217;d like your project to reside, then run the following command:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>express node-express-ajax-craigslist
</span></code></pre></td></tr></table></div></figure>


<h4>CD into the newly created directory and install the node modules:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>node-express-ajax-craigslist
</span><span class='line'><span class="nv">$ </span>npm install
</span></code></pre></td></tr></table></div></figure>


<p>Aside for the installed node modules/dependencies, your project structure should look like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>├── app.js
</span><span class='line'>├── package.json
</span><span class='line'>├── public
</span><span class='line'>│   ├── images
</span><span class='line'>│   ├── javascripts
</span><span class='line'>│   └── stylesheets
</span><span class='line'>│       └── style.css
</span><span class='line'>├── routes
</span><span class='line'>│   ├── index.js
</span><span class='line'>│   └── user.js
</span><span class='line'>└── views
</span><span class='line'>  ├── index.jade
</span><span class='line'>  └── layout.jade
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>In short, your server-side Javascript is held in the <code>app.js</code> file, while the client-side file(s) will be placed in the &#8220;javascripts&#8221; directory. Keep this in mind as we go through the remainder of the tutorial as it&#8217;s important to understand both the relationship between client and server-side Javascript as well as the ability to distinguish between the two.</p></blockquote>

<h4>Next, install <a href="https://github.com/isaacs/node-supervisor">Supervisor</a> if you don&#8217;t already have it:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>npm install supervisor -g
</span></code></pre></td></tr></table></div></figure>


<h4>Finally, run a sanity check by testing out your app:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>supervisor app
</span></code></pre></td></tr></table></div></figure>


<p>Point your browser to <a href="http://localhost:3000/">http://localhost:3000/</a> and you should see the simple &#8220;Welcome to Express&#8221; message:</p>

<p><img src="https://raw.github.com/mjhea0/node-express-ajax-craigslist/master/img/welcome.png" alt="image" /></p>

<p>Still with me? Good. Let&#8217;s set up our first route.</p>

<h2>app.js (server-side)</h2>

<h4>Within <code>app.js</code>, comment out the following two dependencies since we&#8217;ll be defining <em>all</em> our views directly in <code>app.js</code>:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">routes</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./routes&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./routes/user&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Comment out the following routes as well:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nx">routes</span><span class="p">.</span><span class="nx">index</span><span class="p">);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">list</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>You probably noticed the <code>'express'</code> dependency. Remember that we also used Express to generate our project structure. To clarify, Express is <em>both</em> a framework and a command line tool. Just be aware that you can use the Express framework without generating the project structure, although you would probably want to follow another boilerplate structure to speed up the development process.</p></blockquote>

<h4><strong>Let&#8217;s set up our routes.</strong> Routes bind a URL to a specific function. In other words, when a request is sent by the end user, it&#8217;s handled by a specific URL. Different requests are handled by different URLs within our application. Hence the need for different routes.</h4>

<p>Our app we&#8217;ll have two routes. (1) The first renders the search page where the end user directly searches Craigslist. (2) The result of the search is then passed to another route via AJAX, which processes the request on the server side.</p>

<p>Let&#8217;s look at the former.</p>

<h2>Index Route (client-side)</h2>

<h4>Add the following code to &#8216;app.js&#8217;:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">)});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Essentially, when a user sends an HTTP GET request to <code>/</code>, the <code>index.jade</code> view is rendered. Let&#8217;s test this out. Update the code in the <code>index.jade</code> view:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='jade'><span class='line'><span class="nt">extends</span> layout
</span><span class='line'>
</span><span class='line'><span class="nt">block</span> content
</span><span class='line'> <span class="nt">h1</span> goodbye, cruel world
</span></code></pre></td></tr></table></div></figure>


<p>Double check in the terminal that your server is still running (and that there are no errors), and then return to your browser and refresh the page. You should see the updated H1 tag:</p>

<p><img src="https://raw.github.com/mjhea0/node-express-ajax-craigslist/master/img/goodbye.png" alt="image" /></p>

<p>Next, we&#8217;ll update the view.</p>

<h2>Index View (client-side)</h2>

<h4>First, update <code>index.jade</code>:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='jade'><span class='line'><span class="nt">extends</span> layout
</span><span class='line'>
</span><span class='line'>   <span class="nt">block</span> content
</span><span class='line'>   <span class="nt">input</span><span class="nf">#search</span>(<span class="na">type=</span><span class="s">&quot;search&quot;</span><span class="err">,</span> <span class="na">placeholder=</span><span class="s">&quot;Search Craig&#39;s Jobs&quot;</span>)
</span><span class='line'>   <span class="nt">h2</span><span class="nf">#results</span>
</span><span class='line'>
</span><span class='line'>   <span class="nt">script</span>(<span class="na">src=</span><span class="s">&quot;//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js&quot;</span>)
</span><span class='line'>   <span class="nt">script</span>(<span class="na">src=</span><span class="s">&quot;/javascripts/main.js&quot;</span>)
</span></code></pre></td></tr></table></div></figure>


<p>Then add the following styles to &#8220;style.css&#8221;:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nf">#search</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span><span class="m">500px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span> <span class="m">70px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">font-size</span><span class="o">:</span><span class="m">3.5em</span><span class="p">;</span>
</span><span class='line'>  <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span><span class="m">8px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Refresh your browser. See the updates?</p>

<p><img src="https://raw.github.com/mjhea0/node-express-ajax-craigslist/master/img/craigs.png" alt="image" /></p>

<p>This should be straightforward.</p>

<h2>Main.js (client-side)</h2>

<h4>While we&#8217;re still on the client side, let&#8217;s go ahead and add the event handler within the <code>main.js</code> file:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#search&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
</span><span class='line'>   <span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">13</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>     <span class="kd">var</span> <span class="nx">parameters</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">search</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="p">};</span>
</span><span class='line'>       <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="s1">&#39;/searching&#39;</span><span class="p">,</span><span class="nx">parameters</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>       <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#results&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span><span class='line'>     <span class="p">});</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'> <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we&#8217;re capturing the search results after the end user presses (and releases) the ENTER button (keycode <code>13</code>), and then storing them in the variable <code>val</code>. This data is then sent to the server where the response <em>will</em> then be handled, passed back to the client, and finally added to the document via another event handler: <code>$('#results').html(data)</code>.</p>

<p>That&#8217;s a lot to take in. Let&#8217;s stop for a minute and look at the workflow from the user perspective.</p>

<h2>Workflow</h2>

<ol>
<li>User navigates to main page. The page loads.</li>
<li>On the page load, the user sees the search box.</li>
<li>User can then enter some text to search for.</li>
<li>After the user presses ENTER results are displayed.</li>
</ol>


<p>Thus far, we&#8217;ve finished numbers 1, 2, and 3. Most of the action is handled in step 4, though. We already passed the results back to the server to the <code>/searching/</code> route. We need to then scrape Craigslist, send the results back, and then display them, of course.</p>

<p>Now might be a good time to take out a piece of paper and a pen and write a diagram of what has happened thus far.</p>

<p>Ready? Let&#8217;s move back to the server-side.</p>

<h2>app.js (server-side) redux</h2>

<h4>Back on the sever side, we need a route to handle <code>/searching/</code>:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/searching&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
</span><span class='line'> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s2">&quot;WHEEE&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Notice the <code>res.send()</code>. I just want to test that the route works. Point your browser to <a href="http://localhost:3000/searching">http://localhost:3000/searching</a>. If all is well, you should see &#8220;WHEEE&#8221; in the top-left of the screen. We now know the route is working.</h4>

<h4>With the route working, we need to accomplish a number of things -</h4>

<ul>
<li>Set the returned value from the search box to a variable;</li>
<li>Pass the variable into the YQL search URL (YQL handles the actual scraping);</li>
<li>Use the <em>request</em> module to process the YQL URL and return the results; and,</li>
<li>Pass the results back to the client side.</li>
</ul>


<p><strong>We&#8217;ll handle all this in increments, testing as we go.</strong></p>

<h4>Set the returned value from the search box to a variable:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/searching&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'> <span class="c1">// input value from search</span>
</span><span class='line'> <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">search</span><span class="p">;</span>
</span><span class='line'> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// testing the route</span>
</span><span class='line'><span class="c1">// res.send(&quot;WHEEE&quot;);</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>So after you add this code, return to your main route in the browser - <a href="http://localhost:3000/">http://localhost:3000/</a> - and place your terminal next to the browser. Now enter a search term and press ENTER. You should see the <code>console.log()</code> in the terminal:</p>

<p><img src="https://raw.github.com/mjhea0/node-express-ajax-craigslist/master/img/value.png" alt="image" /></p>

<p>In the above example, I first searched for &#8220;Ruby&#8221; and then &#8220;hello, wonderful&#8221;.</p>

<p>Moving on, let&#8217;s add another step.</p>

<h4>Pass the variable into the YQL search URL.</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/searching&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'> <span class="c1">// input value from search</span>
</span><span class='line'> <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">search</span><span class="p">;</span>
</span><span class='line'><span class="c1">//console.log(val);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// url used to search yql</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">&quot;http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20craigslist.search&quot;</span> <span class="o">+</span>
</span><span class='line'><span class="s2">&quot;%20where%20location%3D%22sfbay%22%20and%20type%3D%22jjj%22%20and%20query%3D%22&quot;</span> <span class="o">+</span> <span class="nx">val</span> <span class="o">+</span> <span class="s2">&quot;%22&amp;format=&quot;</span> <span class="o">+</span>
</span><span class='line'><span class="s2">&quot;json&amp;diagnostics=true&amp;env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// testing the route</span>
</span><span class='line'><span class="c1">// res.send(&quot;WHEEE&quot;);</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Again, open your browser along with your terminal and search for something relevant. (This specific YQL URL searches for all jobs in the San Francisco Bay Area.)</p>

<p><img src="https://raw.github.com/mjhea0/node-express-ajax-craigslist/master/img/yql.png" alt="image" /></p>

<p>I searched for Ruby then Python in the example above. If you want to see the actual JSON results, grab the URL from the terminal and paste it into your browser&#8217;s address bar.</p>

<h4>Use the <a href="https://github.com/mikeal/request"><em>request</em></a> module to process the YQL URL and return the results. To do this we need to first install this module by running this command from your terminal:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>npm install request
</span></code></pre></td></tr></table></div></figure>


<p>Now add the following code to the route function:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// request module is used to process the yql url and return the results in JSON format</span>
</span><span class='line'><span class="nx">request</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
</span><span class='line'> <span class="c1">// logic used to compare search results with the input from user</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">body</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">RDF</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>   <span class="nx">craig</span> <span class="o">=</span> <span class="s2">&quot;No results found. Try again.&quot;</span><span class="p">;</span>
</span><span class='line'> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">craig</span> <span class="o">=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">RDF</span><span class="p">.</span><span class="nx">item</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;about&#39;</span><span class="p">];</span>
</span><span class='line'> <span class="p">}</span>
</span><span class='line'> <span class="c1">// pass back the results to client side</span>
</span><span class='line'> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">craig</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>So that <code>app.js</code> looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/searching&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'> <span class="c1">// input value from search</span>
</span><span class='line'> <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">search</span><span class="p">;</span>
</span><span class='line'><span class="c1">//console.log(val);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// url used to search yql</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">&quot;http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20craigslist.search&quot;</span> <span class="o">+</span>
</span><span class='line'><span class="s2">&quot;%20where%20location%3D%22sfbay%22%20and%20type%3D%22jjj%22%20and%20query%3D%22&quot;</span> <span class="o">+</span> <span class="nx">val</span> <span class="o">+</span> <span class="s2">&quot;%22&amp;format=&quot;</span> <span class="o">+</span>
</span><span class='line'><span class="s2">&quot;json&amp;diagnostics=true&amp;env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'> <span class="c1">// request module is used to process the yql url and return the results in JSON format</span>
</span><span class='line'> <span class="nx">request</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>   <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
</span><span class='line'>   <span class="c1">// logic used to compare search results with the input from user</span>
</span><span class='line'>   <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">body</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">RDF</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>     <span class="nx">craig</span> <span class="o">=</span> <span class="s2">&quot;No results found. Try again.&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">craig</span> <span class="o">=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">RDF</span><span class="p">.</span><span class="nx">item</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;about&#39;</span><span class="p">];</span>
</span><span class='line'>   <span class="p">}</span>
</span><span class='line'> <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// testing the route</span>
</span><span class='line'>  <span class="c1">// res.send(&quot;WHEEE&quot;);</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>In this code, we pass the YQL URL to the <em>request</em> module (<code>request(url</code>&#8230;), then we grab the callback (<code>body</code>), which is a string, and then parse it as JSON (<code>body = JSON.parse(body);</code>). Next, we test to see if any results are returned. If so, we assign the value <code>body.query.results.RDF.item[0]['about']</code> to <code>craig</code>, and if not, we assign the value <code>"No results found. Try again."</code> to <code>craig</code>.</p>

<blockquote><p>If you run into problems here, stop and test. <code>console.log()</code> the <code>body</code>. You can also add a <code>console.log</code> inside the conditional statement to see if the logic is even working. For example, if you know that no results are being returned, yet when you add <code>console.log(testing)</code> inside the first conditional and don&#8217;t see it in your console when you run the app, you know that your logic is incorrect.</p>

<p><strong>When in doubt always, always, ALWAYS test with <code>console.log()</code>.</strong></p></blockquote>

<h4>Finally, let&#8217;s pass the results back to the client side:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/searching&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'> <span class="c1">// input value from search</span>
</span><span class='line'> <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">search</span><span class="p">;</span>
</span><span class='line'><span class="c1">//console.log(val);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// url used to search yql</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">&quot;http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20craigslist.search&quot;</span> <span class="o">+</span>
</span><span class='line'><span class="s2">&quot;%20where%20location%3D%22sfbay%22%20and%20type%3D%22jjj%22%20and%20query%3D%22&quot;</span> <span class="o">+</span> <span class="nx">val</span> <span class="o">+</span> <span class="s2">&quot;%22&amp;format=&quot;</span> <span class="o">+</span>
</span><span class='line'><span class="s2">&quot;json&amp;diagnostics=true&amp;env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'> <span class="c1">// request module is used to process the yql url and return the results in JSON format</span>
</span><span class='line'> <span class="nx">request</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>   <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
</span><span class='line'>   <span class="c1">// logic used to compare search results with the input from user</span>
</span><span class='line'>   <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">body</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">RDF</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>     <span class="nx">craig</span> <span class="o">=</span> <span class="s2">&quot;No results found. Try again.&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">craig</span> <span class="o">=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">RDF</span><span class="p">.</span><span class="nx">item</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;about&#39;</span><span class="p">];</span>
</span><span class='line'>   <span class="p">}</span>
</span><span class='line'> <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// pass back the results to client side</span>
</span><span class='line'>  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">craig</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// testing the route</span>
</span><span class='line'>  <span class="c1">// res.send(&quot;WHEEE&quot;);</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>So, we&#8217;re simply taking <code>craig</code>, which could contain results or a string stating that no results could be found and sending it back to the client using     <code>res.send(craig)</code>.</p>

<p>And with that, we&#8217;re finished with the server side.</p>

<h2>Main.js (client-side) redux</h2>

<h4>Open <code>main.js</code> and look at the following code:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="s1">&#39;/searching&#39;</span><span class="p">,</span><span class="nx">parameters</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#results&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is the <em>actual</em> AJAX request. As I stated before, we pass the <code>parameters</code> (which is an object) to the server side. We also have a handler setup to process the response from the server, which then takes the returned results and adds the data to the <code>&lt;h2&gt;</code> tag with the <code>id</code> of <code>results</code> in the JADE template.</p>

<p>Now the end user should see the results.</p>

<h2>Testing</h2>

<p>Test it out using a number of inputs. <em>Remember: this searches jobs in the SF Bay Area, so use appropriate keywords.</em></p>

<p><img src="https://raw.github.com/mjhea0/node-express-ajax-craigslist/master/img/ruby.png" alt="image" /></p>

<p>Wait. Why did this return just the URL? Well, go back to <code>app.js</code> and check the conditional logic:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">body</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">RDF</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">craig</span> <span class="o">=</span> <span class="s2">&quot;No results found. Try again.&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">craig</span> <span class="o">=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">RDF</span><span class="p">.</span><span class="nx">item</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;about&#39;</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If the query returns results, then we pass <code>body.query.results.RDF.item[0]['about']</code> to <code>craig</code>. What is that value? Well, we take the JSON file, <code>body</code>, and traverse through it. Let&#8217;s look at the JSON file real quick. You can grab this from the <a href="https://raw.github.com/mjhea0/node-express-ajax-craigslist/master/yql.json">repo</a>.</p>

<p>Now just look at the value, <code>body.query.results.RDF.item[0]['about']</code>, and compare it to the JSON file. We move from <code>query</code> to <code>RDF</code> to the first item, <code>item[0]</code>. Finally, when we call the <code>about</code> key, the URL (the value) is returned. Make sense? See if you can return the <code>description</code> from the second <code>item</code>.</p>

<p>Now let&#8217;s turn that text URL into an actual clickable URL. See if you can do it yourself before you look at my <a href="https://gist.github.com/mjhea0/05da6ead756bd6af7d3b">answer</a>.</p>

<p><img src="https://raw.github.com/mjhea0/node-express-ajax-craigslist/master/img/final.png" alt="image" /></p>

<h2>Conclusion</h2>

<p>That&#8217;s all for now. Next time we&#8217;ll look at how to return multiple results and loop through them with <a href="http://handlebarsjs.com/">Handlebars</a> and the separation of concerns. Comment if you have questions. Check out the <a href="https://github.com/mjhea0/node-express-ajax-craigslist">repo</a>. Cheers!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2013/10/11/basic-git-commands/">Basic Git Commands</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2013-10-11T11:19:00-06:00" pubdate data-updated="true">Oct 11<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here you will find a quick, high-level overview of some of the major Git commands along with short descriptions and examples. For simplicity, the commands are divided into four sections: <em>initializing</em>, <em>staging</em>, <em>committing</em>, and <em>maintaining</em>. Specifically, we will be covering these commands: <code>config</code>, <code>init</code>, <code>clone</code>, <code>add</code>, <code>status</code>, <code>commit</code>, <code>push</code>, <code>pull</code>, <code>log</code>, and <code>reset</code>.</p>

<blockquote><p>Before you read on, I assume you have <a href="http://git-scm.com/book/en/Getting-Started-Installing-Git">Git</a> installed. You also want to associate your email address with your account.</p></blockquote>

<p>Check to see which email address is associated to Git:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git config user.email
</span></code></pre></td></tr></table></div></figure>


<p>You can update the email if necessary:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git config --global user.email <span class="s2">&quot;myemail@address.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Initializing</h3>

<p>As you probably know, Git is a <a href="http://en.wikipedia.org/wiki/Revision_control">version control</a> system, which allows you to save snapshots of your projects into repositories. Before you can start taking snapshots though, you have to establish a repository by either creating one from scratch or by copying an already established repository.</p>

<ul>
<li><code>git init</code> initializes a new empty repository on your local machine:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git init
</span><span class='line'>Initialized empty Git repository in /Users/michaelherman/Documents/repos/github/git-commands/.git/
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>git clone &lt;url&gt;</code> clones (or copies) a git repository to your local machine. When you clone, you do not need to initialize a new repository because cloning copies all files, including the <em>actual</em> repository.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git clone git@github.com:mjhea0/sinatra-blog.git
</span><span class='line'>Cloning into <span class="s1">&#39;sinatra-blog&#39;</span>...
</span><span class='line'>remote: Counting objects: 48, <span class="k">done</span>.
</span><span class='line'>remote: Compressing objects: 100% <span class="o">(</span>36/36<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>remote: Total 48 <span class="o">(</span>delta 14<span class="o">)</span>, reused 44 <span class="o">(</span>delta 10<span class="o">)</span>
</span><span class='line'>Receiving objects: 100% <span class="o">(</span>48/48<span class="o">)</span>, 10.05 KiB, <span class="k">done</span>.
</span><span class='line'>Resolving deltas: 100% <span class="o">(</span>14/14<span class="o">)</span>, <span class="k">done</span>.
</span></code></pre></td></tr></table></div></figure>


<p>To see the repo, navigate into the directory and then view all files. You&#8217;ll see a hidden directory called &#8220;.git&#8221;, which is the actual repository:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>sinatra-blog
</span><span class='line'><span class="nv">$ </span>ls -a
</span></code></pre></td></tr></table></div></figure>


<h3>Staging</h3>

<p>The goal of really any version control system is to save periodic snapshots of your projects. Once you have a snapshot saved, you can feel safe working on your project as you can always revert back to an earlier snapshot if you make a huge error.</p>

<p>If saving the snapshot is the goal, then staging is the actual act of taking the snapshot before you add it to the photo album (repository) for safe keeping.</p>

<ul>
<li><code>git add &lt;filename&gt;</code> adds a new file to staging. This file is now ready to be committed. Remember, you have taken the snapshot but not saved it yet. It&#8217;s in the queue waiting to be added (or committed) to your local repository.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git add readme.md
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>git add .</code> adds all files in the current directory and all sub directories to your local working directory.</li>
<li><code>git status</code> lists all files ready to be committed, which have been added to staging, and files not currently being tracked by Git. Use this command to view the state of your working directory and staging area.</li>
</ul>


<p>I added &#8220;readme.md&#8221; to staging. However, there&#8217;s another file in the directory, &#8220;test.md&#8221;, which has not been added. Let&#8217;s see what <code>git status</code> has to say:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>ls
</span><span class='line'>readme.md test.md
</span><span class='line'><span class="nv">$ </span>git status
</span><span class='line'><span class="c"># On branch master</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Initial commit</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Changes to be committed:</span>
</span><span class='line'><span class="c">#   (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># new file:   readme.md</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Untracked files:</span>
</span><span class='line'><span class="c">#   (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># test.md</span>
</span></code></pre></td></tr></table></div></figure>


<p>So, while &#8220;readme.md&#8221; is in staging, ready to be committed, &#8220;test.md&#8221;, is not being tracked.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git add .
</span><span class='line'><span class="nv">$ </span>git status
</span><span class='line'><span class="c"># On branch master</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Initial commit</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Changes to be committed:</span>
</span><span class='line'><span class="c">#   (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># new file:   readme.md</span>
</span><span class='line'><span class="c"># new file:   test.md</span>
</span><span class='line'><span class="c"># </span>
</span></code></pre></td></tr></table></div></figure>


<h3>Committing</h3>

<p>After taking a snapshot, you want to move the snapshot from staging to your actual repository. Committing achieves this. From there you have the option of continuing to work locally or sharing those commits to a remote repository, perhaps on your web hosting platform or on Github.</p>

<ul>
<li><code>git commit -am ‘&lt;add note&gt;’</code> commits new and updated files - moving them from the staging queue to your local repository. Make sure the note you add is relevant - that is, it summarizes the changes or updates you&#8217;ve made.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git commit -am <span class="s2">&quot;initial commit&quot;</span>
</span><span class='line'><span class="o">[</span>master 93127ee<span class="o">]</span> initial commit
</span><span class='line'>2 files changed, 2 insertions<span class="o">(</span>+<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>What does <code>git status</code> say now?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git status
</span><span class='line'><span class="c"># On branch master</span>
</span><span class='line'>nothing to commit <span class="o">(</span>working directory clean<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>git push origin master</code> gathers all the committed files from your local repository and uploads them to a remote repository. Keep in mind that not all files are included in the upload; only new files and files that contain changes. Put another way, this command syncs your local repository and external repository so they are <em>exactly</em> the same.</li>
</ul>


<blockquote><p>Before you can push, you must add a remote repository to share your local repository with, which you&#8217;ll see in the example.</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git remote add origin git@github.com:mjhea0/git-commands.git
</span><span class='line'><span class="nv">$ </span>git push origin master
</span><span class='line'>Counting objects: 6, <span class="k">done</span>.
</span><span class='line'>Delta compression using up to 4 threads.
</span><span class='line'>Compressing objects: 100% <span class="o">(</span>4/4<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>Writing objects: 100% <span class="o">(</span>6/6<span class="o">)</span>, 449 bytes, <span class="k">done</span>.
</span><span class='line'>Total 6 <span class="o">(</span>delta 0<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
</span><span class='line'>To git@github.com:mjhea0/git-commands.git
</span><span class='line'>* <span class="o">[</span>new branch<span class="o">]</span>      master -&gt; master
</span></code></pre></td></tr></table></div></figure>


<p>Success! Take a look at my remote <a href="https://github.com/mjhea0/git-commands">repo</a> on Github, which has identical copies of my files from my local working directory and repository.</p>

<h3>Maintaining</h3>

<p>The more you work with Git - or any version control system, for that matter - the less you&#8217;ll spend simply taking (<code>git add .</code>) and saving (<code>git commit</code>) snapshots. Maintaining (both local and remote) and ensuring your local and remote repositories stay in sync can be incredibly time consuming.</p>

<p>This section could easily be split into multiple sections, with five ot ten commands each. However, most readers will follow a pretty straight forward workflow of initializing, staging, and then committing, without having to stray too far into maintenance.</p>

<ul>
<li><code>git pull origin master</code> literally pulls the changes made from a remote repository to your local repository. Perhaps you are collaborating on a project and need to pull changes down made by your collaborators or maybe you&#8217;re just working solo and updating a local repository on different computer.</li>
</ul>


<p>To demonstrate a basic pull, I made changes to the &#8220;readme.md&#8221; files on the remote repository. I want those changes to reflect locally, so I can simply pull them down.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git pull origin master
</span><span class='line'>remote: Counting objects: 5, <span class="k">done</span>.
</span><span class='line'>remote: Compressing objects: 100% <span class="o">(</span>3/3<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>remote: Total 3 <span class="o">(</span>delta 0<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
</span><span class='line'>Unpacking objects: 100% <span class="o">(</span>3/3<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>From github.com:mjhea0/git-commands
</span><span class='line'> * branch            master     -&gt; FETCH_HEAD
</span><span class='line'>Updating 93127ee..15f4b6c
</span><span class='line'>Fast-forward
</span><span class='line'> readme.md | 2 +-
</span><span class='line'> 1 file changed, 1 insertion<span class="o">(</span>+<span class="o">)</span>, 1 deletion<span class="o">(</span>-<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>You may have heard of the <code>fetch</code> and/or <code>merge</code> commands. Well, the <code>pull</code> command literally is a combination of both those commands. In essence, you are first &#8220;fetching&#8221; all the changes, then &#8220;merging&#8221; those changes. In the example above, I fetched the changes made to &#8220;readme.md&#8221;, then merged the two files. Keep in mind that most merge situations are never this simple, and problems can arise in the merge process, which can be difficult to solve.</p></blockquote>

<p>In the example, I changed the text within &#8220;test.md&#8221; both locally and remotely:
- Local: &#8220;testing merge&#8221;
- Remote: &#8220;merging test&#8221;</p>

<p>If I just try to <code>push</code> or <code>pull</code> like normal, I will run into errors:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git pull origin master
</span><span class='line'>remote: Counting objects: 5, <span class="k">done</span>.
</span><span class='line'>remote: Compressing objects: 100% <span class="o">(</span>2/2<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>remote: Total 3 <span class="o">(</span>delta 0<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
</span><span class='line'>Unpacking objects: 100% <span class="o">(</span>3/3<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>From github.com:mjhea0/git-commands
</span><span class='line'> * branch            master     -&gt; FETCH_HEAD
</span><span class='line'>Updating 15f4b6c..30b7818
</span><span class='line'>error: Your <span class="nb">local </span>changes to the following files would be overwritten by merge: test.md
</span><span class='line'>Please, commit your changes or stash them before you can merge.
</span><span class='line'>Aborting
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>git push origin master
</span><span class='line'>To git@github.com:mjhea0/git-commands.git
</span><span class='line'>! <span class="o">[</span>rejected<span class="o">]</span>        master -&gt; master <span class="o">(</span>non-fast-forward<span class="o">)</span>
</span><span class='line'>error: failed to push some refs to <span class="s1">&#39;git@github.com:mjhea0/git-commands.git&#39;</span>
</span><span class='line'>hint: Updates were rejected because the tip of your current branch is behind
</span><span class='line'>hint: its remote counterpart. Merge the remote changes <span class="o">(</span>e.g. <span class="s1">&#39;git pull&#39;</span><span class="o">)</span>
</span><span class='line'>hint: before pushing again.
</span><span class='line'>hint: See the <span class="s1">&#39;Note about fast-forwards&#39;</span> in <span class="s1">&#39;git push --help&#39;</span> <span class="k">for </span>details.
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>So neither command worked. You can see in the stack trace some helpful hints. Basically, I can do a fast forward in either direction (PUSH or PULL), which forces the changes by adding an <code>-f</code> to the end of either command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git push origin master -f
</span><span class='line'>Total 0 <span class="o">(</span>delta 0<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
</span><span class='line'>To git@github.com:mjhea0/git-commands.git
</span><span class='line'>+ 30b7818...15f4b6c master -&gt; master <span class="o">(</span>forced update<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>In small, trivial situations, it&#8217;s perfectly fine to use this method of merging. However, when you are dealing with complex code, you will definitely want to take a different approach - which will be covered next time.</p>

<ul>
<li><code>git log</code> is used to view the history of your repository.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log
</span><span class='line'>commit 15f4b6c44b3c8924caabfac9e4be11946e72acfb
</span><span class='line'>Author: Michael Herman &lt;hermanmu@gmail.com&gt;
</span><span class='line'>Date:   Thu Oct 10 22:56:30 2013 -0600
</span><span class='line'>
</span><span class='line'>    Update readme.md
</span><span class='line'>
</span><span class='line'>commit 93127eed8fa0c3b4df7bbdabd7d6aefa312c31a3
</span><span class='line'>Author: Michael Herman &lt;hermanmu@gmail.com&gt;
</span><span class='line'>Date:   Thu Oct 10 22:45:14 2013 -0600
</span><span class='line'>
</span><span class='line'>   initial commit
</span></code></pre></td></tr></table></div></figure>


<p>Here we can see the local commits, along with the commit number, author info, date, and the note from the commit - which is exactly why it&#8217;s good to use detailed messages with your commits.</p>

<ul>
<li><code>git reset --hard &lt;commit number&gt;</code> is used for reverting back to a particular commit. Check the logs to find the commit number you want to revert back to. If you ever submit code that breaks other code (which will happen), use this command to discard that commit and roll back the entire repository to the commit you specify. Continuing with the snapshot analogy, perhaps you took and then saved three bad pictures of yourself. Well, you can use this command to discard those pictures.</li>
</ul>


<p>So I went ahead and made another change to &#8220;readme.md&#8221; and committed the files locally. I now have three commits according to the log:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log
</span><span class='line'>commit 0f3165bf69b3d508431fa2fe2d5a0b8013637fd2
</span><span class='line'>Author: Michael Herman &lt;hermanmu@gmail.com&gt;
</span><span class='line'>Date:   Thu Oct 10 23:38:42 2013 -0600
</span><span class='line'>
</span><span class='line'>    another update to readme.md
</span><span class='line'>
</span><span class='line'>commit 15f4b6c44b3c8924caabfac9e4be11946e72acfb
</span><span class='line'>Author: Michael Herman &lt;hermanmu@gmail.com&gt;
</span><span class='line'>Date:   Thu Oct 10 22:56:30 2013 -0600
</span><span class='line'>
</span><span class='line'>    Update readme.md
</span><span class='line'>
</span><span class='line'>commit 93127eed8fa0c3b4df7bbdabd7d6aefa312c31a3
</span><span class='line'>Author: Michael Herman &lt;hermanmu@gmail.com&gt;
</span><span class='line'>Date:   Thu Oct 10 22:45:14 2013 -0600
</span><span class='line'>
</span><span class='line'>   initial commit
</span></code></pre></td></tr></table></div></figure>


<p>Let&#8217;s say I made that last commit on accident. How do I correct?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git reset --hard 15f4b6c44b3c8924caabfac9e4be11946e72acfb
</span><span class='line'>HEAD is now at 15f4b6c Update readme.md
</span></code></pre></td></tr></table></div></figure>


<p>By using the &#8216;reset&#8217; command I completely discarded the changes from the last commit. The file even reverted back. It&#8217;s like the changes never happened:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log
</span><span class='line'>commit 15f4b6c44b3c8924caabfac9e4be11946e72acfb
</span><span class='line'>Author: Michael Herman &lt;hermanmu@gmail.com&gt;
</span><span class='line'>Date:   Thu Oct 10 22:56:30 2013 -0600
</span><span class='line'>
</span><span class='line'>    Update readme.md
</span><span class='line'>
</span><span class='line'>commit 93127eed8fa0c3b4df7bbdabd7d6aefa312c31a3
</span><span class='line'>Author: Michael Herman &lt;hermanmu@gmail.com&gt;
</span><span class='line'>Date:   Thu Oct 10 22:45:14 2013 -0600
</span><span class='line'>
</span><span class='line'>   initial commit
</span></code></pre></td></tr></table></div></figure>


<p>Back to the previous state. Yay!</p>

<br>


<p>Again, these are the basic commands - and the commands that I use the most. Next time we&#8217;ll go over some of the more advanced commands and I&#8217;ll detail a workflow you can follow for when you work with more than one person on a single project. Cheers!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2013/09/16/managing-multiple-github-accounts/">Managing Multiple Github Accounts</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2013-09-16T07:43:00-06:00" pubdate data-updated="true">Sep 16<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Let&#8217;s look at how to manage multiple Github accounts from one computer. In essence, it&#8217;s simply a matter of balancing both your git and ssh configurations - which actually is not as bad as it might seem.</p>

<blockquote><p>Note: This tutorial is meant for Unix users.</p></blockquote>

<h2>Set up SSH Keys</h2>

<p>Let&#8217;s assume your two Github accounts are named <em>githubPersonal</em> and <em>githubWork</em>, respectively.</p>

<p>Create two SSH keys, saving each to a separate file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> ~/.ssh
</span><span class='line'><span class="nv">$ </span>ssh-keygen -t rsa -C <span class="s2">&quot;your_email@associated_with_githubPersonal.com&quot;</span>
</span><span class='line'><span class="c"># save it as id_rsa_personal when prompted</span>
</span><span class='line'><span class="nv">$ </span>ssh-keygen -t rsa -C <span class="s2">&quot;your_email@associated_with_githubWork.com&quot;</span>
</span><span class='line'><span class="c"># save it as id_rsa_work when prompted</span>
</span></code></pre></td></tr></table></div></figure>


<p>The above commands setup the following files:</p>

<ul>
<li><em>id_rsa_personal</em></li>
<li><em>id_rsa_personal.pub</em></li>
<li><em>id_rsa_work</em></li>
<li><em>id_rsa_work.pub</em></li>
</ul>


<h2>Add the keys to your Github accounts:</h2>

<h4>Copy the key to your clipboard:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>pbcopy &lt; ~/.ssh/id_rsa_personal.pub
</span></code></pre></td></tr></table></div></figure>


<h4>Add the key to your account:</h4>

<ul>
<li>Go to your Account Settings</li>
<li>Click &#8220;SSH Keys&#8221; then &#8220;Add SSH key&#8221;</li>
<li>Paste your key into the &#8220;Key&#8221; field and add a relevant title</li>
<li>Click &#8220;Add key&#8221; then enter your Github password to confirm</li>
</ul>


<h4>Repeat the process for your <em>githubWork</em> account.</h4>

<h2>Create a configuration file to manage the separate keys</h2>

<h4>Create a config file in ~/.ssh/</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>touch config
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h4>Edit the file using the text editor of your choice. I used vim - <code>$ vim config</code>:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># githubPersonal</span>
</span><span class='line'>Host personal
</span><span class='line'>   HostName github.com
</span><span class='line'>   User git
</span><span class='line'>   IdentityFile ~/.ssh/id_rsa_personal
</span><span class='line'>
</span><span class='line'><span class="c"># githubWork</span>
</span><span class='line'>Host work
</span><span class='line'>   HostName github.com
</span><span class='line'>   User git
</span><span class='line'>   IdentityFile ~/.ssh/id_rsa_work
</span></code></pre></td></tr></table></div></figure>


<h2>Update stored identities</h2>

<h4>Clear currently stored identities:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>ssh-add -D
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h4>Add new keys:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>ssh-add id_rsa_personal
</span><span class='line'><span class="nv">$ </span>ssh-add id_rsa_work
</span></code></pre></td></tr></table></div></figure>


<h4>Test to make sure new keys are stored:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>ssh-add -l
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h4>Test to make sure Github recognizes the keys:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>ssh -T personal
</span><span class='line'>Hi githubPersonal! You<span class="s1">&#39;ve successfully authenticated, but GitHub does not provide shell access.</span>
</span><span class='line'><span class="s1">$ ssh -T work</span>
</span><span class='line'><span class="s1">Hi githubWork! You&#39;</span>ve successfully authenticated, but GitHub does not provide shell access.
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h2>Test PUSH</h2>

<h4>On Github, create a new repo in your personal account, <em>githubPersonal</em>, called <em>test-personal</em>.</h4>

<h4>Back on your local machine, create a test directory:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> ~/documents
</span><span class='line'><span class="nv">$ </span>mkdir <span class="nb">test</span>-personal
</span><span class='line'><span class="nv">$ </span><span class="nb">cd test</span>-personal
</span></code></pre></td></tr></table></div></figure>


<h4>Add a blank &#8220;readme.md&#8221; file and PUSH to Github:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>touch readme.md
</span><span class='line'><span class="nv">$ </span>git init
</span><span class='line'><span class="nv">$ </span>git add .
</span><span class='line'><span class="nv">$ </span>git commit -am <span class="s2">&quot;first commit&quot;</span>
</span><span class='line'><span class="nv">$ </span>git remote add origin git@personal:githubPersonal/test-personal.git
</span><span class='line'><span class="nv">$ </span>git push origin master
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>Notice how we&#8217;re using the custom account, <code>git@personal</code>, instead of <code>git@github.com</code>.</p></blockquote>

<h4>Repeat the process for your <em>githubWork</em> account.</h4>

<h2>Test PULL</h2>

<h4>Add some text to the <em>readme.md</em> file in your personal account on Github.</h4>

<h4>Now PULL and merge the changes by running the following command within the <em>test-personal</em> directory:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git pull origin master
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h4>Again, repeat this for your <em>githubWork</em> account.</h4>

<br/>


<p>Questons? Comments? Did I miss something? Comment below.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/9/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/7/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/03/06/node-with-docker-continuous-integration-and-delivery/">Node with Docker - continuous integration and delivery</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/12/postgresql-and-nodejs/">PostgreSQL and NodeJS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/05/sublime-text-for-web-developers/">Sublime Text for Web Developers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/31/local-authentication-with-passport-and-express-4/">User Authentication with Passport and Express 4</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/31/node-and-mongoose-a-primer/">Node, Express, and MongoDB - a primer</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/analytics/'>analytics (8)</a></li>
<li class='category'><a href='/blog/categories/angular/'>angular (3)</a></li>
<li class='category'><a href='/blog/categories/crowdfunding/'>crowdfunding (1)</a></li>
<li class='category'><a href='/blog/categories/docker/'>docker (1)</a></li>
<li class='category'><a href='/blog/categories/excel/'>excel (3)</a></li>
<li class='category'><a href='/blog/categories/finance/'>finance (2)</a></li>
<li class='category'><a href='/blog/categories/frontend/'>frontend (1)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (1)</a></li>
<li class='category'><a href='/blog/categories/github/'>github (1)</a></li>
<li class='category'><a href='/blog/categories/meteor/'>meteor (1)</a></li>
<li class='category'><a href='/blog/categories/news/'>news (2)</a></li>
<li class='category'><a href='/blog/categories/node/'>node (12)</a></li>
<li class='category'><a href='/blog/categories/python/'>python (11)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>ruby (3)</a></li>
<li class='category'><a href='/blog/categories/startups/'>startups (3)</a></li>
<li class='category'><a href='/blog/categories/sublime/'>sublime (2)</a></li>

  </ul>
</section><section>
  <h1>About Me</h1>
  <p>A little something about me.</p>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Michael Herman <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>, customized with <a href="https://github.com/mjhea0/whiterspace">whiterspace</a>.</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'michaelherman';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  <script type="text/javascript" src="//s3.amazonaws.com/scripts.hellobar.com/4bda7d5a1c9bd6b6b8382efaf71e4fccbcf180ce.js"></script>
</body>
</html>
