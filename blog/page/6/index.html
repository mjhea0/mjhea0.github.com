
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Michael Herman</title>
  <meta name="author" content="Michael Herman">

  
  <meta name="description" content="Meteor is a next generation framework used for rapidly developing web apps, which seamlessly combines popular packages like MongoDB, Node.js, and &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mjhea0.github.com/blog/page/6">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/jquery.messagebar.min.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Michael Herman" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.messagebar.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37074204-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mjhea0.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2014/01/29/meteor-dot-js-in-action-create-an-app-test-with-laika/">Meteor.js in Action: Create an App, Test With Laika</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2014-01-29T10:51:00-07:00" pubdate data-updated="true">Jan 29<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="center" src="https://raw.github.com/mjhea0/meteor-in-action/master/images/meteor.jpeg"></p>

<p>Meteor is a next generation framework used for rapidly developing web apps, which seamlessly combines popular packages like MongoDB, Node.js, and jQuery, to name a few.</p>

<p>Check out the excellent Meteor <a href="http://docs.meteor.com/">documentation</a> for more information. Grab the code from the repo <a href="https://github.com/mjhea0/meteor-in-action">here</a>.</p>

<p><strong>Please note: Before you can follow this tutorial, please install <a href="http://nodejs.org/download/">Node and npm</a>.</strong></p>

<p>With that, let&#8217;s start building …</p>

<blockquote><p>This tutorial uses Meteor version <code>0.7.0.1</code> - which, as of writing, is the latest version</p></blockquote>

<h2>TOC</h2>

<ol>
<li><a href="#setup">Setup a Project</a></li>
<li><a href="#create">Create a Basic App</a></li>
<li><a href="#restructure">Restructure</a></li>
<li><a href="#test">Testing Framework</a></li>
<li><a href="#submit">Users can submit answers</a></li>
<li><a href="#submitted">Users can see all submitted answers</a></li>
<li><a href="#vote">Users can up or down vote answers</a></li>
<li><a href="#twitter">Users can login via Twitter</a></li>
<li><a href="#loggedin">Users can only answer or vote if they are logged in</a></li>
<li><a href="#insecure">Remove insecure packages</a></li>
<li><a href="#deployment">Deployment</a></li>
<li><a href="#next">What&#8217;s next?</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ol>


<p><a id="setup"></a></p>

<h2>Setup a Project</h2>

<h4>1. Install Meteor and the Meteor Package Manager, <a href="https://github.com/oortcloud/meteorite">Meteorite</a>:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl https://install.meteor.com/ | sh
</span><span class='line'><span class="nv">$ </span>meteor update
</span><span class='line'><span class="nv">$ </span>npm install -g meteorite
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>Alternatively, you can install meteor with npm, <code>npm install -g meteor</code>), however the npm package is not uploaded or maintained by Meteor Development Group</p></blockquote>

<h4>2. Create a Meteor project:</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>meteor create mymeteor
</span></code></pre></td></tr></table></div></figure>


<p>Look! It tells you exactly what to do:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>To run your new app:
</span><span class='line'>   <span class="nb">cd </span>mymeteor
</span><span class='line'>   meteor
</span></code></pre></td></tr></table></div></figure>


<p>Go ahead and run it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>mymeteor
</span><span class='line'><span class="nv">$ </span>meteor
</span><span class='line'><span class="o">[[[[[</span> ~/Desktop/mymeteor <span class="o">]]]]]</span>
</span><span class='line'>
</span><span class='line'><span class="o">=</span>&gt; Meteor server running on: http://localhost:3000/
</span></code></pre></td></tr></table></div></figure>


<p>We just initialized the Meteor server. Navigate to [http://localhost:3000/]
(http://localhost:3000/), and you should see:</p>

<p><img src="https://raw.github.com/mjhea0/meteor-in-action/master/images/helloworld.png" alt="helloworld" /></p>

<p>If port 3000 is unavailable, you can use <code>–port</code> as an option:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>meteor --port 1337
</span></code></pre></td></tr></table></div></figure>


<p>Leave the app running. The browser will automatically update as you save changes to your code.</p>

<h5>What&#8217;s going on here?</h5>

<p>Look at your basic project structure:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>.
</span><span class='line'>├── mymeteor.css
</span><span class='line'>├── mymeteor.html
</span><span class='line'>└── mymeteor.js
</span></code></pre></td></tr></table></div></figure>


<p>Your JS file contains both client and server code:
  &#8220;`javascript
  // client!
  if (Meteor.isClient) {</p>

<pre><code>Template.hello.greeting = function () {
  return "Welcome to mymeteor.";
};

Template.hello.events({
  'click input' : function () {
    // template data, if any, is available in 'this'
    if (typeof console !== 'undefined')
      console.log("You pressed the button");
  }
});
</code></pre>

<p>  }</p>

<p>  // server!
  if (Meteor.isServer) {</p>

<pre><code>Meteor.startup(function () {
  // code to run on server at startup
});
</code></pre>

<p>  }
  &#8220;`</p>

<p>The behavior of <code>{{greeting}}</code> in the HTML file is controlled by <code>Template</code> within the client-side code in the JS file, as well as the handling of events.</p>

<p><a id="create"></a></p>

<h2>Create a Basic App</h2>

<p>In this example, we&#8217;ll be creating an app, which displays a question with a list of answers. Users can -</p>

<ol>
<li>Submit answers</li>
<li>See all submitted answers</li>
<li>Up or down vote answers</li>
<li>Login via Twitter</li>
<li>Only answer or vote if they are logged in</li>
<li>View question but not submitted answers without logging in</li>
</ol>


<p>Before we start adding this functionality, let&#8217;s first restructure the project.</p>

<p><a id="restructure"></a></p>

<h2>Restructure</h2>

<h4>1. Add Packages (err Smart Packages!)</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>mrt add accounts-ui
</span><span class='line'>accounts-ui: Simple templates to add login widgets to an app
</span><span class='line'><span class="nv">$ </span>mrt add accounts-twitter
</span><span class='line'>accounts-twitter: Login service <span class="k">for </span>Twitter accounts
</span><span class='line'><span class="nv">$ </span>mrt add bootstrap-3
</span><span class='line'>bootstrap-3: Provides bootstrap 3.
</span></code></pre></td></tr></table></div></figure>


<p>Watch your browser as you add these. You should see the styles update almost immediately.</p>

<p>You can read more about these packages <a href="http://docs.meteor.com/#accountsui">here</a>, <a href="http://docs.meteor.com/#accounts_api">here</a>, <a href="https://github.com/mangasocial/meteor-bootstrap-3">here</a>. It&#8217;s pretty awesome that you can add these web components in just a matter of minutes! Awesome for prototyping!</p>

<blockquote><p>You can view the available packages from the terminal by running the command - <code>meteor list</code></p></blockquote>

<h4>2. Add client and server folders</h4>

<p>Add two new folders - &#8220;client&#8221; and &#8220;server&#8221;. Essentially, if Meteor detects a client folder, all the JavaScript within the folder will be run on the client-side, while JavaScript code found within the server folder will run only on the server-side.</p>

<p>Within the client folder, create a file called &#8220;mainClient.js&#8221; and add the following code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">Meteor</span><span class="p">.</span><span class="nx">isClient</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">Template</span><span class="p">.</span><span class="nx">hello</span><span class="p">.</span><span class="nx">greeting</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="s2">&quot;Welcome to mymeteor.&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">Template</span><span class="p">.</span><span class="nx">hello</span><span class="p">.</span><span class="nx">events</span><span class="p">({</span>
</span><span class='line'>    <span class="s1">&#39;click input&#39;</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// template data, if any, is available in &#39;this&#39;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">console</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;You pressed the button&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then within the server folder, and a file called &#8220;mainServer.js&#8221; and add the following code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">Meteor</span><span class="p">.</span><span class="nx">isServer</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">Meteor</span><span class="p">.</span><span class="nx">startup</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// code to run on server at startup</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Delete the &#8220;mymeteor.js&#8221; file. If you look at your browser, everything should look the same. Add one more folder called &#8220;tests&#8221;, which as you probably guessed will include our unit tests along with a file called &#8220;index.js&#8221;.</p>

<p>Your project structure should now look like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>.
</span><span class='line'>├── client
</span><span class='line'>│   └── mainClient.js
</span><span class='line'>├── mymeteor.css
</span><span class='line'>├── mymeteor.html
</span><span class='line'>├── server
</span><span class='line'>│   └── mainServer.js
</span><span class='line'>└── tests
</span><span class='line'>    └── index.js
</span></code></pre></td></tr></table></div></figure>


<h4>3. Update HTML</h4>

<p>Update &#8220;mymeteor.html&#8221;:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">content=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;author&quot;</span> <span class="na">content=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;title&gt;</span>One Question. Several Answers.<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;http://netdna.bootstrapcdn.com/bootswatch/3.0.3/yeti/bootstrap.min.css&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/head&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    {{&gt; hello}}
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;template</span> <span class="na">name=</span><span class="s">&quot;hello&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Hello World!<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  {{greeting}}
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Click&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Your app should now look like this:</p>

<p><img src="https://raw.github.com/mjhea0/meteor-in-action/master/images/helloworld-redux.png" alt="helloworld-redux" /></p>

<p><a id="test"></a></p>

<h2>Testing Framework</h2>

<p>Since both client and server code are interconnected, we want to be able to write test cases that target both the client and server. <a href="http://arunoda.github.io/laika/">Laika</a> is by far the best framework for this.</p>

<p>For this reason, your tests will run bit slower.</p>

<p>Before installing Laika, make sure you have <a href="http://nodejs.org/">Node.js</a>, <a href="http://phantomjs.org/download.html">PhantomJS</a>, and <a href="http://docs.mongodb.org/manual/installation/">MongoDB</a> installed. Also, run <a href="http://docs.mongodb.org/v2.2/reference/mongod/"><code>mongod</code></a> in a separate terminal window.</p>

<p>Install Laika:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>sudo npm install -g laika
</span></code></pre></td></tr></table></div></figure>


<p>All of our tests will reside in the &#8220;index.js&#8221; file within the &#8220;tests&#8221; folder.</p>

<p>Now let&#8217;s start building.</p>

<p><a id="submit"></a></p>

<h2>Users can submit answers</h2>

<h4>1. Client JS</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">Answers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Meteor</span><span class="p">.</span><span class="nx">Collection</span><span class="p">(</span><span class="s2">&quot;answers&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">Template</span><span class="p">.</span><span class="nx">addAnswer</span><span class="p">.</span><span class="nx">events</span><span class="p">({</span>
</span><span class='line'>  <span class="s1">&#39;click input.add-answer&#39;</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">answerText</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;answerText&quot;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">Meteor</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;addAnswer&quot;</span><span class="p">,</span><span class="nx">answerText</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span> <span class="p">,</span> <span class="nx">answerId</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Added answer with ID: &#39;</span><span class="o">+</span><span class="nx">answerId</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;answerText&quot;</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h5>What&#8217;s going on?</h5>

<p>First, we have a click event, which grabs the value from the input box. This value is then passed to the server side via the <a href="http://docs.meteor.com/#meteor_call"><code>.call()</code></a> - which is used to invoke a method. <code>answerId</code> is then the call back, which is then assigned to the console.log.</p>

<h4>1. Server JS</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">Answers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Meteor</span><span class="p">.</span><span class="nx">Collection</span><span class="p">(</span><span class="s2">&quot;answers&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">Meteor</span><span class="p">.</span><span class="nx">methods</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">addAnswer</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">answerText</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Adding Answer ...&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">answerId</span> <span class="o">=</span> <span class="nx">Answers</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span>
</span><span class='line'>      <span class="s1">&#39;answerText&#39;</span> <span class="o">:</span> <span class="nx">answerText</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;submittedOn&#39;</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">answerId</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">answerId</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h5>What&#8217;s going on?</h5>

<p>On the client side we passed the <code>answerText</code> - inputted value - to the server side. This answer is the added to the MongoDB collection, then we return the answerID, which is handled on the client side.</p>

<p>Notice how we established the Mongo collection on both the client and server.</p>

<h4>3. HTML</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">content=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;author&quot;</span> <span class="na">content=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;title&gt;</span>One Question. Several Answers.<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;http://netdna.bootstrapcdn.com/bootswatch/3.0.3/yeti/bootstrap.min.css&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/head&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h1&gt;</span>Add an answer. Or vote.<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h3&gt;&lt;em&gt;</span>Question<span class="nt">&lt;/em&gt;</span>: Is the world getting warmer?<span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>    <span class="nt">&lt;br&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div&gt;</span>
</span><span class='line'>      <span class="c">&lt;!-- if there is an answer, append it to the DOM --&gt;</span>
</span><span class='line'>      {{&gt; addAnswer}}
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;template</span> <span class="na">name=</span><span class="s">&quot;addAnswer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">rows=</span><span class="s">&quot;3&quot;</span> <span class="na">name=</span><span class="s">&quot;answerText&quot;</span> <span class="na">id=</span><span class="s">&quot;answerText&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Add Your Answer ..&quot;</span><span class="nt">&gt;&lt;/textarea&gt;</span>
</span><span class='line'>  <span class="nt">&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">class=</span><span class="s">&quot;btn-primary add-answer btn-md&quot;</span> <span class="na">value=</span><span class="s">&quot;Add Answer&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>4. Manually Test</h4>

<p>First, your browser view should now look like this:</p>

<p><img src="https://raw.github.com/mjhea0/meteor-in-action/master/images/part1.png" alt="part1" /></p>

<p>Next, arrange your screen so that you can view both your terminal as well as your browser. Also, open up the JS debug console:</p>

<p><img src="https://raw.github.com/mjhea0/meteor-in-action/master/images/part1-2.png" alt="part1-2" /></p>

<p>Then, just like in the screenshot above, add an answer. On the client side, you should see the MongoDB ID - i.e., <code>Added answer with ID: ECrTqRQha7vpXu78q</code>, which should match the ID on the server side:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>I20140114-07:38:27.061<span class="o">(</span>-7<span class="o">)</span>? Adding Answer ...
</span><span class='line'>I20140114-07:38:27.340<span class="o">(</span>-7<span class="o">)</span>? ECrTqRQha7vpXu78q
</span></code></pre></td></tr></table></div></figure>


<p><strong>Want to see something cool?</strong> Of course you do.</p>

<p>Open up your browser&#8217;s console. Let&#8217;s add an answer:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&gt; Answers.insert<span class="o">({</span>answerText: <span class="s1">&#39;Client Side Console Test!&#39;</span><span class="o">})</span>;
</span><span class='line'><span class="s2">&quot;3D9nQYn87gXQX66ha&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>You should see the answer appear on the page instantly!!</p>

<h4>5. Automated Test</h4>

<p>Now, add a Laika test by adding the following code to &#8220;index.js&#8221;:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="s1">&#39;use strict&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">suite</span><span class="p">(</span><span class="s1">&#39;submitAnswers&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ensure that -</span>
</span><span class='line'>  <span class="c1">// (1) the &quot;Answers&quot; collection exists</span>
</span><span class='line'>  <span class="c1">// (2) we can connect to the collection</span>
</span><span class='line'>  <span class="c1">// (3) the collection is empty</span>
</span><span class='line'>  <span class="nx">test</span><span class="p">(</span><span class="s1">&#39;server initialization&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">server</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">server</span><span class="p">.</span><span class="nb">eval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">collection</span> <span class="o">=</span> <span class="nx">Answers</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">fetch</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;collection&#39;</span><span class="p">,</span> <span class="nx">collection</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}).</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;collection&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">collection</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">done</span><span class="p">();</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ensure that -</span>
</span><span class='line'>  <span class="c1">// (1) we can add data to the collection</span>
</span><span class='line'>  <span class="c1">// (2) after data is added, we can retrieve it</span>
</span><span class='line'>  <span class="nx">test</span><span class="p">(</span><span class="s1">&#39;server insert : OK&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">server</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">server</span><span class="p">.</span><span class="nb">eval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">Answers</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="nx">answerText</span><span class="o">:</span> <span class="s2">&quot;whee!&quot;</span>  <span class="p">});</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">collection</span> <span class="o">=</span> <span class="nx">Answers</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">fetch</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;collection&#39;</span><span class="p">,</span> <span class="nx">collection</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}).</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;collection&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">collection</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">done</span><span class="p">();</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">client</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;collection&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">Answers</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">fetch</span><span class="p">().</span><span class="nx">length</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">done</span><span class="p">();</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h5>What&#8217;s going on here?</h5>

<p>Basically, we are just testing that the Answers collection exists and is accessible. See the inline comments for more info.</p>

<p>You may have noticed that Laika runs a bit slow. Well, that&#8217;s normal - because Laika creates a new, isolated app and database for each test, and each test is also isolated for the other, so you don&#8217;t have to worry about dumping the database after each test.</p>

<h5>Run the test</h5>

<p>If all goes well, you should see this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>laika
</span><span class='line'>
</span><span class='line'>  injecting laika...
</span><span class='line'>  loading phantomjs...
</span><span class='line'>  loading initial app pool...
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  submitAnswers
</span><span class='line'>    ✓ server initialization <span class="o">(</span>1517ms<span class="o">)</span>
</span><span class='line'>    ✓ server insert : OK
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  2 passing <span class="o">(</span>2s<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  cleaning up injected code
</span></code></pre></td></tr></table></div></figure>


<p>Congrats! You just wrote your first test!</p>

<blockquote><p>If you have not initialized a Git repo yet, go ahead and do this now. Then commit the code.</p></blockquote>

<p><a id="submitted"></a></p>

<h2>Users can see all submitted answers</h2>

<h4>1. Client JS</h4>

<p>Add the following template to pull out the data from the collection and sort in descending order.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">return</span> <span class="nx">Answers</span><span class="p">.</span><span class="nx">find</span><span class="p">({},{</span><span class="nx">sort</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;submittedOn&#39;</span><span class="o">:-</span><span class="mi">1</span><span class="p">}});</span>
</span></code></pre></td></tr></table></div></figure>


<h4>2. HTML</h4>

<p>Add the templates to the HTML file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">content=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;author&quot;</span> <span class="na">content=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;title&gt;</span>One Question. Several Answers.<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;http://netdna.bootstrapcdn.com/bootswatch/3.0.3/yeti/bootstrap.min.css&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/head&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h1&gt;</span>Add an answer. Or vote.<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h3&gt;&lt;em&gt;</span>Question<span class="nt">&lt;/em&gt;</span>: Is the world getting warmer?<span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>    <span class="nt">&lt;br&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div&gt;</span>
</span><span class='line'>      <span class="c">&lt;!-- if there is an answer, append it to the DOM --&gt;</span>
</span><span class='line'>      {{&gt; addAnswer}}
</span><span class='line'>      {{&gt; answers}}
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;template</span> <span class="na">name=</span><span class="s">&quot;addAnswer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">rows=</span><span class="s">&quot;3&quot;</span> <span class="na">name=</span><span class="s">&quot;answerText&quot;</span> <span class="na">id=</span><span class="s">&quot;answerText&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Add Your Answer ..&quot;</span><span class="nt">&gt;&lt;/textarea&gt;</span>
</span><span class='line'>  <span class="nt">&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">class=</span><span class="s">&quot;btn-primary add-answer btn-md&quot;</span> <span class="na">value=</span><span class="s">&quot;Add Answer&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;template</span> <span class="na">name=</span><span class="s">&quot;answers&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h2&gt;</span>All Questions<span class="nt">&lt;/h2&gt;</span>
</span><span class='line'>  {{#each items}}
</span><span class='line'>    {{&gt; answer}}
</span><span class='line'>  {{/each}}
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;template</span> <span class="na">name=</span><span class="s">&quot;answer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;lead&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      {{answerText}}
</span><span class='line'>      <span class="nt">&lt;br&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/p&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>3. Manually Test</h4>

<p>You should see all of the submitted answers:</p>

<p><img src="https://raw.github.com/mjhea0/meteor-in-action/master/images/part2.png" alt="part2" /></p>

<p>Go ahead and add new answers. They should immediately appear.</p>

<p>As far as automated testing goes, we are already testing this with this code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">client</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;collection&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">Answers</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">fetch</span><span class="p">().</span><span class="nx">length</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">done</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Commit your code.</p>

<p><a id="vote"></a></p>

<h2>Users can up or down vote answers</h2>

<p>Let&#8217;s add some voting capabilities. Think about what we need to add for this.</p>

<ol>
<li>Update collection to store votes</li>
<li>Update HTML to add vote buttons</li>
<li>Event handler for when the user clicks a button so that the collection is updated</li>
</ol>


<h4>1. Server JS</h4>

<p>Add the following code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">incrementYesVotes</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">answerID</span><span class="p">){</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">answerID</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">Answers</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">answerID</span><span class="p">,{</span><span class="nx">$inc</span> <span class="o">:</span> <span class="p">{</span><span class="s1">&#39;yes&#39;</span><span class="o">:</span><span class="mi">1</span><span class="p">}});</span>
</span><span class='line'><span class="p">},</span>
</span><span class='line'><span class="nx">incrementNoVotes</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">answerID</span><span class="p">){</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">answerID</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">Answers</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">answerID</span><span class="p">,{</span><span class="nx">$inc</span> <span class="o">:</span> <span class="p">{</span><span class="s1">&#39;no&#39;</span><span class="o">:</span><span class="mi">1</span><span class="p">}});</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This utilizes Meteor&#8217;s collection update to increment the counter.</p>

<h4>2. Client JS</h4>

<p>Add the event handler:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">Template</span><span class="p">.</span><span class="nx">answer</span><span class="p">.</span><span class="nx">events</span><span class="p">({</span>
</span><span class='line'>  <span class="s1">&#39;click&#39;</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">Session</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;selected_answer&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_id</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s1">&#39;click a.yes&#39;</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">answerId</span> <span class="o">=</span> <span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selected_answer&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;updating yes count for answerId &#39;</span><span class="o">+</span><span class="nx">answerId</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">Meteor</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;incrementYesVotes&quot;</span><span class="p">,</span><span class="nx">answerId</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s1">&#39;click a.no&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">answerId</span> <span class="o">=</span> <span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selected_answer&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;updating no count for answerId &#39;</span><span class="o">+</span><span class="nx">answerId</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">Meteor</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;incrementNoVotes&quot;</span><span class="p">,</span><span class="nx">answerId</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h4>3. HTML</h4>

<p>Update the <code>answer</code> template:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;template</span> <span class="na">name=</span><span class="s">&quot;answer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;lead&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      {{answerText}}
</span><span class='line'>      <span class="nt">&lt;br&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;btn btn-xs btn-success yes&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-thumbs-up&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> Yes {{yes}}<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;btn btn-xs btn-primary no&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-thumbs-down&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> No {{no}}<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/p&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>3. Manually Test</h4>

<p>You should see Yes and No buttons below the answers:</p>

<p><img src="https://raw.github.com/mjhea0/meteor-in-action/master/images/part3.png" alt="part3" /></p>

<p>Test it out:</p>

<p><img src="https://raw.github.com/mjhea0/meteor-in-action/master/images/part3-2.png" alt="part3-2" /></p>

<h4>4. Automated Test</h4>

<p>Add the following code to &#8220;index.js&#8221;:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">suite</span><span class="p">(</span><span class="s1">&#39;addVotes&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ensure that -</span>
</span><span class='line'>  <span class="c1">// (1) we can add data to the collection</span>
</span><span class='line'>  <span class="c1">// (2) after data is added, we can retrieve it</span>
</span><span class='line'>  <span class="nx">test</span><span class="p">(</span><span class="s1">&#39;server insert votes : OK&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">server</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">server</span><span class="p">.</span><span class="nb">eval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">Answers</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="nx">answerText</span><span class="o">:</span> <span class="s2">&quot;wheeeeeeeeeee!&quot;</span><span class="p">});</span>
</span><span class='line'>      <span class="nx">Answers</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span><span class="nx">answerText</span><span class="o">:</span> <span class="s2">&quot;wheeeeeeeeeee!&quot;</span><span class="p">},{</span><span class="nx">$inc</span> <span class="o">:</span> <span class="p">{</span><span class="s1">&#39;yes&#39;</span><span class="o">:</span><span class="mi">1</span><span class="p">}});</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">voteCollection</span> <span class="o">=</span> <span class="nx">Answers</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">fetch</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;collection&#39;</span><span class="p">,</span> <span class="nx">voteCollection</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}).</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;collection&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">voteCollection</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// console.log(collection[0].yes)</span>
</span><span class='line'>      <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">voteCollection</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">yes</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">done</span><span class="p">();</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h5>What&#8217;s going on here?</h5>

<p>Similar to the last test, we are just testing that the collection exists and that it returns certain data. This time, though, we are not just testing that the collection exists, but that the <code>yes</code> key contains a value of 1.</p>

<h5>Run the test</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>laika
</span><span class='line'>
</span><span class='line'>  injecting laika...
</span><span class='line'>  loading phantomjs...
</span><span class='line'>  loading initial app pool...
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  submitAnswers
</span><span class='line'>    ✓ server initialization <span class="o">(</span>1882ms<span class="o">)</span>
</span><span class='line'>    ✓ server insert : OK <span class="o">(</span>2957ms<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  addVotes
</span><span class='line'>    ✓ server insert votes : OK <span class="o">(</span>3105ms<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  3 passing <span class="o">(</span>8s<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  cleaning up injected code
</span></code></pre></td></tr></table></div></figure>


<p>Commit your code!</p>

<p><a id="twitter"></a></p>

<h2>Users can login via Twitter</h2>

<p>Remember when we added these two packages-</p>

<ol>
<li><code>accounts-ui</code></li>
<li><code>accounts-twitter</code></li>
</ol>


<p>-well, let&#8217;s go ahead and use them.</p>

<h4>1. Update HTML</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h1&gt;</span>Add an answer. Or vote.<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div&gt;</span>
</span><span class='line'>      {{loginButtons}}
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;br&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h3&gt;&lt;em&gt;</span>Question<span class="nt">&lt;/em&gt;</span>: Is the world getting warmer?<span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>    <span class="nt">&lt;br&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div&gt;</span>
</span><span class='line'>      <span class="c">&lt;!-- if there is an answer, append it to the DOM --&gt;</span>
</span><span class='line'>      {{&gt; addAnswer}}
</span><span class='line'>      {{&gt; answers}}
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Check your browser. You should see the &#8220;Configure Twitter Login&#8221; button. Go ahead and click it:</p>

<p><img src="https://raw.github.com/mjhea0/meteor-in-action/master/images/oauth.png" alt="oauth" /></p>

<p>Wow. This tells you <em>exactly</em> how to setup your app on Twitter for logging via Oauth. Follow the instructions to create the app, then copy and paste the consumer key and consumer secret into the window on the Meteor app.</p>

<p>Next, test logging in. If all went well you should see:</p>

<p><img src="https://raw.github.com/mjhea0/meteor-in-action/master/images/oauth2.png" alt="oauth2" /></p>

<blockquote><p>If you need to add a different Twitter app to authenticate with you must drop the <code>meteor_accounts_loginServiceConfiguration</code> collection from MongoDB - <code>db.meteor_accounts_loginServiceConfiguration.drop()</code></p></blockquote>

<h4>4. Automated Test</h4>

<p>Since the Twitter login is part of a pre-written package, we do not need to do any unit tests. In general, unit tests should be reserved to code that you have written. Other people&#8217;s code should be tested within the scope of a functional test, which I cannot figure out how to do with Laika. You could use Selenium or PhantomJS here, but I think just the manual testing is fine for now. The Meteor team really needs to develop an internal testing solution.</p>

<p>Commit your code. Take a breath. Move on.</p>

<p><a id="loggedin"></a></p>

<h2>Users can only answer or vote if they are logged in</h2>

<p>Finally, let&#8217;s add some restrictions so that a user must be logged in before adding answers or voting.</p>

<h4>1. Client JS</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">Template</span><span class="p">.</span><span class="nx">answer</span><span class="p">.</span><span class="nx">events</span><span class="p">({</span>
</span><span class='line'>  <span class="s1">&#39;click&#39;</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">Session</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;selected_answer&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_id</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s1">&#39;click a.yes&#39;</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="nx">Meteor</span><span class="p">.</span><span class="nx">userId</span><span class="p">()){</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">answerId</span> <span class="o">=</span> <span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selected_answer&#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;updating yes count for answerId &#39;</span><span class="o">+</span><span class="nx">answerId</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">Meteor</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;incrementYesVotes&quot;</span><span class="p">,</span><span class="nx">answerId</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s1">&#39;click a.no&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="nx">Meteor</span><span class="p">.</span><span class="nx">userId</span><span class="p">()){</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">answerId</span> <span class="o">=</span> <span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selected_answer&#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;updating no count for answerId &#39;</span><span class="o">+</span><span class="nx">answerId</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">Meteor</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;incrementNoVotes&quot;</span><span class="p">,</span><span class="nx">answerId</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h4>2. Server JS</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">answerId</span> <span class="o">=</span> <span class="nx">Answers</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span>
</span><span class='line'>  <span class="s1">&#39;answerText&#39;</span> <span class="o">:</span> <span class="nx">answerText</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;submittedOn&#39;</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
</span><span class='line'>  <span class="s1">&#39;submittedBy&#39;</span> <span class="o">:</span> <span class="nx">Meteor</span><span class="p">.</span><span class="nx">userId</span><span class="p">()</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h4>3. HTML</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">content=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;author&quot;</span> <span class="na">content=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;title&gt;</span>One Question. Several Answers.<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;http://netdna.bootstrapcdn.com/bootswatch/3.0.3/yeti/bootstrap.min.css&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/head&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h1&gt;</span>Add an answer. Or vote.<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    {{#if currentUser}}
</span><span class='line'>      {{loginButtons}}
</span><span class='line'>    {{/if}}
</span><span class='line'>    <span class="nt">&lt;br&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h3&gt;&lt;em&gt;</span>Question<span class="nt">&lt;/em&gt;</span>: Is the world getting warmer?<span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>    <span class="nt">&lt;br&gt;</span>
</span><span class='line'>      <span class="nt">&lt;div&gt;</span>
</span><span class='line'>        {{#if currentUser}}
</span><span class='line'>          {{&gt; addAnswer}}
</span><span class='line'>          {{&gt; answers}}
</span><span class='line'>        {{/if}}
</span><span class='line'>        {{#unless currentUser}}
</span><span class='line'>          {{&gt; login}}
</span><span class='line'>          {{loginButtons}}
</span><span class='line'>        {{/unless}}
</span><span class='line'>      <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;template</span> <span class="na">name=</span><span class="s">&quot;addAnswer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">rows=</span><span class="s">&quot;3&quot;</span> <span class="na">name=</span><span class="s">&quot;answerText&quot;</span> <span class="na">id=</span><span class="s">&quot;answerText&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Add Your Answer ..&quot;</span><span class="nt">&gt;&lt;/textarea&gt;</span>
</span><span class='line'>  <span class="nt">&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">class=</span><span class="s">&quot;btn-primary add-answer btn-md&quot;</span> <span class="na">value=</span><span class="s">&quot;Add Answer&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;template</span> <span class="na">name=</span><span class="s">&quot;answers&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h2&gt;</span>All Questions<span class="nt">&lt;/h2&gt;</span>
</span><span class='line'>  {{#each items}}
</span><span class='line'>    {{&gt; answer}}
</span><span class='line'>  {{/each}}
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;template</span> <span class="na">name=</span><span class="s">&quot;answer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;lead&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      {{answerText}}
</span><span class='line'>      <span class="nt">&lt;br&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;btn btn-xs btn-success yes {{#unless currentUser}}disabled{{/unless}}&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-thumbs-up&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> Yes {{yes}}<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;btn btn-xs btn-primary no {{#unless currentUser}}disabled{{/unless}}&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-thumbs-down&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> No {{no}}<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/p&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;template</span> <span class="na">name=</span><span class="s">&quot;login&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h4&gt;</span>Sign in using Twitter to submit new questions or to vote on existing questions.<span class="nt">&lt;/h4&gt;</span>
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h5>What&#8217;s going on here?</h5>

<ol>
<li><code>if(Meteor.userId()){}</code> prevents a user from voting if they are not logged in, but only on the JS side. In other words, the user can still click the button; it&#8217;s just nothing will happen if they do.</li>
<li><code>'submittedBy' : Meteor.userId()</code> adds the logged in user to the collection</li>
<li><code>{{#unless currentUser}}disabled{{/unless}}</code> disables the yes or no button. Now the it can&#8217;t even be clicked unless the user is logged in.</li>
<li><code>{{#if currentUser}} ... {{/if}}</code> and <code>{{#unless currentUser}} ... {{/unless}}</code> are used to display certain templates if the user is logged in or not.</li>
</ol>


<h4>4. Manual Test</h4>

<p>Open your browser. If you&#8217;re logged in, go ahead and log out. You should see this:</p>

<p><img src="https://raw.github.com/mjhea0/meteor-in-action/master/images/loggedout.png" alt="loggedout" /></p>

<p>Now, before logging in to test. Let&#8217;s dump the answers collection so that each record in the collection has a user associated with it. To do this, make sure your meteor app is running, then open a new terminal window and navigate to your app&#8217;s project root.</p>

<p>Follow these commands to dump the collection:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>meteor mongo
</span><span class='line'>MongoDB shell version: 2.4.8
</span><span class='line'>connecting to: 127.0.0.1:3002/meteor
</span><span class='line'>meteor:PRIMARY&gt; show dbs;
</span><span class='line'><span class="nb">local </span>0.0625GB
</span><span class='line'>meteor  0.0625GB
</span><span class='line'>meteor:PRIMARY&gt; use meteor;
</span><span class='line'>switched to db meteor
</span><span class='line'>meteor:PRIMARY&gt; show collections;
</span><span class='line'>answers
</span><span class='line'>meteor_accounts_loginServiceConfiguration
</span><span class='line'>questions
</span><span class='line'>system.indexes
</span><span class='line'>users
</span><span class='line'>meteor:PRIMARY&gt; db.answers.drop<span class="o">()</span>
</span><span class='line'><span class="nb">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>Back on your browser, go ahead and log back in. Add an answer.</p>

<p>Finally, jump back to the mongo shell:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>meteor:PRIMARY&gt; show collections;
</span><span class='line'>answers
</span><span class='line'>meteor_accounts_loginServiceConfiguration
</span><span class='line'>questions
</span><span class='line'>system.indexes
</span><span class='line'>users
</span><span class='line'>meteor:PRIMARY&gt; db.answers.find<span class="o">()</span>
</span><span class='line'><span class="o">{</span> <span class="s2">&quot;_id&quot;</span> : <span class="s2">&quot;cbWebazW8eehJkaXL&quot;</span>, <span class="s2">&quot;answerText&quot;</span> : <span class="s2">&quot;This is my first test while logged in.&quot;</span>, <span class="s2">&quot;no&quot;</span> : 2, <span class="s2">&quot;submittedBy&quot;</span> : <span class="s2">&quot;Ex2bHmCgkygNbByEc&quot;</span>, <span class="s2">&quot;submittedOn&quot;</span> : ISODate<span class="o">(</span><span class="s2">&quot;2014-01-14T20:07:53.080Z&quot;</span><span class="o">)</span>, <span class="s2">&quot;yes&quot;</span> : 2 <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Success! There is a key/value pair for the user - <code>"submittedBy" : "Ex2bHmCgkygNbByEc"</code>.</p>

<p><a id="insecure"></a></p>

<h2>Remove insecure packages</h2>

<p>All Meteor applications have a package called Insecure pre-installed. This handy little package gives the client the ability to interact with the database, as you saw before. While this may be handy for prototyping you always want to remove it for production applications.</p>

<p>To remove, just run:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>meteor remove insecure
</span></code></pre></td></tr></table></div></figure>


<h4>1. Manually Test</h4>

<p>Manually test this on your end. With the Meteor server running and your browser open, try to insert an answer in the console. Make sure that the user is logged in.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&gt; Answers.insert<span class="o">({</span>answerText: <span class="s1">&#39;Client Console Test!&#39;</span><span class="o">})</span>
</span><span class='line'><span class="s2">&quot;oeYhZMmXyBjivJ5uM&quot;</span>
</span><span class='line'>insert failed: Access denied
</span></code></pre></td></tr></table></div></figure>


<p>You should the see above insertion error. Also, you know that it&#8217;s not working if the answer did not get immediately added to the page.</p>

<p>Finally, you can look in Mongo, just to be sure. Open a new window in your terminal, navigate to your &#8220;mymeteor&#8221; directory, then type the following commands:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>meteor mongo
</span><span class='line'>MongoDB shell version: 2.4.8
</span><span class='line'>connecting to: 127.0.0.1:3002/meteor
</span><span class='line'>meteor:PRIMARY&gt; show dbs;
</span><span class='line'><span class="nb">local </span>0.0625GB
</span><span class='line'>meteor  0.0625GB
</span><span class='line'>meteor:PRIMARY&gt; use meteor;
</span><span class='line'>switched to db meteor
</span><span class='line'>meteor:PRIMARY&gt; show collections;
</span><span class='line'>answers
</span><span class='line'>meteor_accounts_loginServiceConfiguration
</span><span class='line'>questions
</span><span class='line'>system.indexes
</span><span class='line'>users
</span></code></pre></td></tr></table></div></figure>


<p>Now search the collection:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>meteor:PRIMARY&gt; db.answers.find<span class="o">({</span>answerText: <span class="s1">&#39;Client Console Test!&#39;</span><span class="o">})</span>
</span><span class='line'>meteor:PRIMARY&gt;
</span></code></pre></td></tr></table></div></figure>


<p>This shouldn&#8217;t find anything.</p>

<p><a id="deployment"></a></p>

<h2>Deployment</h2>

<p>Although there are a number of deployment options, pushing your new app to the Meteor test servers is by far the easiest. Simply run the command: <code>meteor deploy &lt;YOUR-APP-NAME-HERE&gt;</code>.</p>

<p>So -</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>meteor deploy answers
</span></code></pre></td></tr></table></div></figure>


<p>Check it out at <a href="http://answers.meteor.com/">http://answers.meteor.com/</a>.</p>

<blockquote><p>The Meteor servers are for <strong>testing</strong> only; they are not meant for apps in production.</p></blockquote>

<p>Don&#8217;t forget to commit!</p>

<p><a id="next"></a></p>

<h2>What&#8217;s next?</h2>

<ol>
<li>Deploy to Heroku</li>
<li>Setup Selenium Tests</li>
<li>Add additional functionality</li>
</ol>


<p><a id="conclusion"></a></p>

<h2>Conclusion</h2>

<p>That&#8217;s it. Give me some feedback. In the coming weeks, I&#8217;ll be deploying an app into production. Stay tuned.</p>

<p>Grab the code from the repo <a href="https://github.com/mjhea0/meteor-in-action">here</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2014/01/23/so-you-want-be-an-entrepreneur/">So You Want Be an Entrepreneur?</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2014-01-23T08:23:00-07:00" pubdate data-updated="true">Jan 23<span>rd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Welcome!</p>

<h3>Contents</h3>

<ol>
<li>Introduction</li>
<li>Focus</li>
<li>Validation</li>
<li>Constraints</li>
<li>Measure</li>
<li>Sustainable Growth</li>
<li>Fail</li>
<li>Conclusion</li>
</ol>


<br>


<h2>Intro</h2>

<p>Okay. So you’re a newly proclaimed entrepreneur, e.g. - someone who will do everything in their power to be sure their company succeeds. You have a breakthrough product idea but you are not completely sure how to go about running the business side of launching said product. You know you want to be as efficient and as quick as possible in building a following and getting your product out there, yet you only have so much time and money. So how do you do it?</p>

<p>Work tirelessly to create your product and launch it as soon as possible? Not exactly. In fact, you want to do the opposite: Work in reverse. It might seem counterintuitive, but trust me, you will thank me in the end. By using the tools and methods below, the process will become clear.</p>

<h2>Focus</h2>

<p>First things first, make sure to start off with simplicity in mind. You want to keep this process <a href="http://theleanstartup.com/">lean</a>. Try to eliminate the need for your team to <a href="http://mherman.org/blog/2013/08/02/multitasking-vs-batching/">multitask</a> too often. You don’t want anyone spreading themselves too thin and not doing their absolute best on a project. Keep it simple. Get things done one at a time and don’t move on to a new project until your current one is done. You can use a whiteboard or spreadsheets or a project management tool like <a href="https://asana.com">Asana</a> or <a href="http://www.getharvest.com/">Harvest</a> to keep track of projects in the brainstorm, in progress, or completed phases. Keep it organized. A benefit to this way of working is that every team member takes part in every aspect of working through a project and everyone gets to learn to think critically about a feature in the brainstorm column.</p>

<p>Will it be validated? If the answer is NO, don’t bother building it! Save the time, money, and stress. <em>Channel those resources into projects that will be validated</em>.</p>

<h2>Validation</h2>

<p>Now, you need to make sure your idea is valid, that what you have to offer is something people need and something that people want. But how do you know if that’s what you have? Test it. In business, especially in the world of startups, everything is an experiment and everything is a test. You’ve just become an entrepreneur, and congratulations, you’re also now a scientist.</p>

<p>You first want to determine what risks are involved with launching your product, service or idea - <a href="http://starterfinancialmodel.com">monetary risk</a>, time risk, etc. - and then determine the profit you’ll acquire from each sale.  When your benefits (profit) outweigh costs (risk), the company should grow. After determining your risks and profits and looking at how they balance out, decide if this idea will be “the one”.</p>

<p>Fortunately, when testing your profit (benefit-cost), you don’t need a huge number of customers to do so. Ten customers will provide the information you need so you don’t have to worry about thousands of customers in order to determine your potential test rate. That said, data changes, as well as your product and customers. What works now may not work in six weeks. Continue to source data for analysis to see if you are growing. Amazon&#8217;s <a href="https://www.mturk.com/mturk/welcome">Mechanical Turk</a> is perfect for such testing at a low cost.</p>

<h2>Constraints</h2>

<p>How do you operate with limited financial, time, or labor resources? It just means you have to work smart. For example, rather than talking in circles with your team about the minute details of your product, look more at the testing. See if the product is even going to sell before you use those minimal resources to build it. Learn before you build and grow and do it quickly, especially if you have a small amount of time to get things done. Launch a landing page, watch the analytics, make changes, and launch again. Talk to your customers as much as you can, run <a href="http://mherman.org/blog/2012/11/16/the-benefits-of-performing-a-cohort-analysis-in-determining-engagement-over-time/#.Ut2aNmTn8y4">cohort analyses</a> if you have enough data, and hold focus groups. Take advantage of every opportunity you have to test your product.</p>

<p>Learn as much as you can directly from the source, your customers.</p>

<p>Now all that information might seem abstract and you want the step-by-step process of growing your business, so here we go:</p>

<ol>
<li><p>First, determine and create the hype about your product. The product doesn’t have to be ready to launch by any means, though. That might seem counter-intuitive because wouldn’t you want to sell something that’s been created rather than selling just an idea? No. <em>You want to create a product you know is going to be successful - one that brings in sales - rather than wasting time making a product that fails.</em></p></li>
<li><p>In order to measure the demand for your idea, create a simple online landing page with <a href="http://launchrock.co/">LaunchRock</a>. Include your product idea, why it would be ideal to purchase this product. Which problems are you trying to solve? And how awesome this product is. Don’t hold back, you’re trying to sell something. After creating the landing page use web analytics (great <a href="http://blog.intlock.com/tracking-real-funnels-mixpanel-vs-kissmetrics-vs-google-analytics/">tools</a> are available for this) to see how many visits to the site you are getting and then take it one step further and look at how many people are interested in purchasing your product, those who try to move onto the second page of your site after they register for the mailing list). If there’s high interest, great! If it’s not what you expected, you can modify the product or throw in the towel completely.</p></li>
<li><p>Now that you’ve tested and retested the validity of your product, it’s time to start building it (since, after all, you told your customer base that it existed). Again, you want to be focus on developing rapidly: Don’t build anything unnecessary. Focus on your key differentiators and/or disruptors. Build what’s useful, iteratively. And don’t leave anything to chance!</p></li>
<li><p>If you make a change, test it. A great way to test a change is to run a double blind study (commonly known as an A/B test). Gather people to test, giving half the original product (A), and the other have the updated product (B) - and observe! See which product gets a better response and go with it. Pay attention to what people do (body language, facial expressions and the like) rather than what they say as people may not be as honest as you’d like them to be.</p></li>
</ol>


<h2>Measure</h2>

<p>It’s built! It’s launched! Is it successful?</p>

<p>Your reports need to be able to show you if something went wrong, either what went wrong or who you can talk to in order to figure that out, learn from it, and improve the issue. Next, reports need to be able to convince others so they must be accurate. This means use your clients and test subjects as actual data points. Don’t massage the data to make it look nice in order give you the results you want - you&#8217;re only hurting yourself. Once your report gets too complicated, there’s more room for error and it becomes less convincing and less accurate. Lastly, it needs to be available to and easily understood by everyone so that they can learn from the data as well.</p>

<h2>Sustainable growth</h2>

<p>We are now going to look at how to sustain growth within your company and more specifically, what type of business model you are working with in order to grow:</p>

<ol>
<li>Is your company going to grow solely by word of mouth, where each customer will then bring in new customers due to satisfaction with your product?</li>
<li>Will the profit from your customers help pay for advertising to increase sales and eventually fund your company?</li>
<li>Or will customers continue to purchase your product for long periods of time, increasing the lifetime value of each customer?</li>
</ol>


<p>Each of these mechanisms provides a means for sustainable growth where the acquisition of new customers stems from the actions of prior customers. Sustainable growth is the best way for a company, especially startups, to flourish. Again, <a href="http://blog.intlock.com/tracking-real-funnels-mixpanel-vs-kissmetrics-vs-google-analytics/">cohort analysis</a> is imperative here.</p>

<h2>Fail</h2>

<p>One important thing to remember in this venture is that you won’t get everything right the first time or second or third … and that’s ok. That’s not your job. You want to empower your employees without applying too much pressure, which is very hard to do. Really, to empower with minimal pressure is to admit to yourself, your team and everyone around you, that mistakes will be made. Just be sure to learn from them. Failure in business is expected - and encouraged. (How else are you going to learn?)</p>

<p>Messing something up gives you a chance to learn and grow your company by improving, learning, and building your intuition for what will and won&#8217;t work. It’s almost to your benefit to mess up now and again.</p>

<hr>


<h4>So that’s it. If you take anything from this post let it be this:</h4>

<ol>
<li>Keep everything simple;</li>
<li>Always test, build, and measure;</li>
<li>Test as much as you can in order to validate that with what you’re working on; and</li>
<li>Allow yourself to make mistakes and learn from them.</li>
</ol>


<p><strong>Now go be an entrepreneur. </strong></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2014/01/15/mad-libs-with-jquery-a-gentle-introduction-to-jquery/">Mad Libs With jQuery: A Gentle Introduction to Javascript and jQuery</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2014-01-15T19:39:00-07:00" pubdate data-updated="true">Jan 15<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Did you ever play Mad Libs as a kid? If not, the rules are simple: You fill out a random list of words based on a part of speech - e.g, nouns, verbs, adjectives, and adverbs - without knowing the underlying context. These words are then inserted into a story. When read, the results are generally humorous, causing much laughter.</p>

<ol>
<li>Try it here - <a href="http://www.backwardsteps.com/madlibs/">http://backwardsteps.com/madlibs/</a>.</li>
<li>Grab the repo here - <a href="http://github.com/mjhea0/jquery-madlibs">http://github.com/mjhea0/jquery-madlibs</a></li>
</ol>


<p>Let&#8217;s have some fun.</p>

<h2>Contents</h2>

<ol>
<li>Create a Project Boilerplate</li>
<li>Add a Form</li>
<li>Handle the Event</li>
<li>Append the text to the DOM</li>
<li>Update the Form and Add the Story</li>
<li>Update the</li>
<li>Handle Another Event</li>
</ol>


<hr>


<h2>Step 1: Create a Project Boilerplate</h2>

<p>Start by creating the following files and directories, to define a basic project structure:</p>

<blockquote><p><strong>What program are you using to make these files in?</strong> I will be using <a href="http://www.sublimetext.com/">Sublime Text</a> for this tutorial, which is an advanced text editor for Windows, Mac, and Linux. If you are looking for something simpler, check out <a href="https://wiki.gnome.org/Apps/Gedit">gedit</a> - which is also cross-platform. Both of these editors have syntax highlighting. Put simply, syntax highlighting helps distinguish between different parts of a languages syntax (rules), by highlighting common parts the same color. This makes code easier to read and debug.</p></blockquote>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>├── css
</span><span class='line'>│   └── main.css
</span><span class='line'>├── index.html
</span><span class='line'>└── js
</span><span class='line'>    └── main.js</span></code></pre></td></tr></table></div></figure>


<h4>index.html</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;http://netdna.bootstrapcdn.com/bootswatch/3.0.3/united/bootstrap.min.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;all&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;css/main.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;all&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;title&gt;</span>My AWESOME Boilerplate<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;h1&gt;</span>Hello, World!<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://code.jquery.com/jquery-1.10.2.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/main.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>main.css</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="c">/* main.css */</span>
</span></code></pre></td></tr></table></div></figure>


<h4>main.js</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;whee!&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>What&#8217;s going on?</h3>

<p>This is a good base for us to start with.</p>

<p>Open the &#8220;index.html&#8221; file in your web browser. You should see &#8220;Hello, World&#8221;.</p>

<p>Go back and look at &#8220;index.html&#8221; in your text editor. You&#8217;re looking at HTML. Put simply, HTML is the language used for creating websites, displayable in a web browser. Now open the &#8220;main.css&#8221; file. While HTML provides the structure, CSS makes webpages look pretty. Together, they are the fundamental building blocks for web pages.</p>

<p>So, while we&#8217;re on the topic of HTML, there are a number of different parts and rules. If I attempted to explain them all, this tutorial would last for days. Fortunately, for this tutorial, you really only need to understand tags, elements, and selectors.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Hello, World!<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Tags form the structure of your page. There usually is an opening tag and then a closing tag, like - <code>&lt;div&gt;&lt;/div&gt;</code>.</li>
<li>Elements represent the tags as well as <em>whatever</em> falls within the tags, like - <code>&lt;h1&gt;Hello, World!&lt;/h1&gt;</code></li>
<li>Selectors are used to select the tag for some purpose. You could use them for defining styles vis CSS or as JavaScript or jQuery hooks - that is, for referencing certain JavaScript code back to the HTML. <em>Put another way, with regard to Javascript, selectors are used to access either tags or elements.</em></li>
</ol>


<blockquote><p>Did you notice that one of my CSS files and two of my scripts are imported from an external URL? These come from a Content Delivery Network (CDN). There are benefits for doing this. See if you can figure them out. Use Google.</p></blockquote>

<p>In the JS file there is a <code>console.log</code>. This is a debugging tool that allows you to post a message to the browser&#8217;s JavaScript console - e.g. Firebug (Firefox) or Developer Tools (Chrome / Safari). If you&#8217;ve never used this before, Google &#8220;accessing the js console in Chrome&#8221; to learn how to pull up the JavaScript console.</p>

<blockquote><p><strong>What about Internet Explorer? Can I use the debugger in that?</strong> Honestly, I do not know. But the majority of web developers do not use Internet Explorer, because it is simply not developer friendly - it does not have the developer tools that Chrome or Firefox has.</p></blockquote>

<p>Open your console. You should see the text &#8220;whee!&#8221;.</p>

<p>Oh - and JavaScript is used in conjunction with HTML and CSS to make webpages interactive.</p>

<h2>Step 2: Add a Form</h2>

<p>For Mad Libs we need to display a form for the user to enter words. Let&#8217;s start with a simplified version.</p>

<h4>index.html</h4>

<p>Add the following code to your &#8220;index.html&#8221; file right after <code>&lt;h1&gt;Hello, World!&lt;/h1&gt;</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- start form --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">&quot;my-form&quot;</span> <span class="na">role=</span><span class="s">&quot;form&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;my-input&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter something ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary btn-md&quot;</span><span class="nt">&gt;</span>My BIG Button<span class="nt">&lt;/button&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'><span class="c">&lt;!-- end form --&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Updated file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;http://netdna.bootstrapcdn.com/bootswatch/3.0.3/united/bootstrap.min.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;all&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;css/main.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;all&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;title&gt;</span>My AWESOME Boilerplate<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;h1&gt;</span>Hello, World!<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>      <span class="c">&lt;!-- start form --&gt;</span>
</span><span class='line'>      <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">&quot;my-form&quot;</span> <span class="na">role=</span><span class="s">&quot;form&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;my-input&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter something ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;br&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/form&gt;</span>
</span><span class='line'>      <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary btn-md&quot;</span><span class="nt">&gt;</span>My BIG Button<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>      <span class="c">&lt;!-- end form --&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://code.jquery.com/jquery-1.10.2.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/main.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>What&#8217;s going on?</h3>

<p>So, here we just added an input and a submit button. Notice all of the new ids and classes. Many of these are associated with <a href="http://getbootstrap.com/">Bootstrap</a> to provide some basic styles.</p>

<p>Let&#8217;s add some custom styles within our local CSS file, &#8220;main.css&#8221;:</p>

<h4>main.css</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="c">/* main.css */</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.container</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">padding-top</span><span class="o">:</span> <span class="m">50px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">max-width</span><span class="o">:</span> <span class="m">300px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>What&#8217;s going on?</h3>

<p>This added the padding to the top of the page and also set a maximum width to the <code>.container</code> class.</p>

<blockquote><p>Find that class in the HTML file. Try tweaking the pixel values to alter the look of the page.</p></blockquote>

<p>Test out the page in you browser. Insert a word into the input box and click the button. Nothing happens. We need to somehow grab that inputted word and do <em>something</em> with it.</p>

<h2>Step 3: Handle the Event</h2>

<p>The process of grabbing the inputted word from the form when a user clicks the button is commonly referred to as an event handler. In this case, the event is the actual button click. We will use jQuery to &#8220;handle&#8221; that event.</p>

<p>Please note that jQuery is JavaScript. Well, it&#8217;s actually a set of libraries developed in JavaScript. But it is possible to perform all the same functionality jQuery provides in vanilla Javascript; it just takes a lot more code.</p>

<blockquote><p>These libraries simplify many of the features in JavaScript such as HTML document (DOM) traversing, event handling, and AJAX using fewer lines of code. Again, utilize Google to find a good tutorial on JavaScript, jQuery, and their differences.</p></blockquote>

<h3>main.js</h3>

<p>Update &#8220;main.js&#8221;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;whee!&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// event handler</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#btn-click&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add an id (<code>id="btn-click"</code>) to &#8220;index.html&#8221; within the <code>&lt;button&gt;</code> tags:</p>

<p>Before:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary btn-md&quot;</span><span class="nt">&gt;</span>My BIG Button<span class="nt">&lt;/button&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>After:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">id=</span><span class="s">&quot;btn-click&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary btn-md&quot;</span><span class="nt">&gt;</span>My BIG Button<span class="nt">&lt;/button&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>What&#8217;s going on?</h3>

<ol>
<li><code>$("#btn-click").click(function(e) {</code> is the event. This initiates the process, running the code in the remainder of the function. In other words, the remaining JavaScript/jQuery will not run until there is a button click.</li>
<li><code>var input = $("input").val()</code> sets a variable called &#8220;input&#8221;, while <code>.val()</code> fetches the value from the form input.</li>
<li><code>id="btn-click"</code> is used to tie the HTML to the JavaScript. This id is reference in the initial event within the JavaScript file - <code>"#btn-click"</code>.</li>
<li><code>console.log(input)</code> displays the word to the end user via the JavaScript console.</li>
</ol>


<blockquote><p>The <code>$()</code> in <code>$("#btn-click").click()</code> is a jQuery constructor. Basically, it&#8217;s used to tell the browser that the code within the parenthesis is jQuery.</p></blockquote>

<p>Open &#8220;index.html&#8221; in your browser. Make sure you have your JavaScript console open. Enter a word in the input box and click the button. This should display the word in the console:</p>

<p><img src="https://raw.github.com/mjhea0/jquery-madlibs/master/images/console.png" alt="console" /></p>

<h2>Step 4: Append the text to the DOM</h2>

<p>Next, instead of using a <code>console.log</code> to display the inputted word to the user, let&#8217;s add it to the Document Object Model (DOM)? Wait. What&#8217;s the DOM? Quit simply, the DOM is a structural representation of the HTML document. Using JavaScript, you can add, remove, or modify the contents of the DOM, which changes how the page looks to the end user.</p>

<p>In this case, we want to add the text to the DOM.</p>

<h4>main.js</h4>

<p>Open up your JavaScript file and add this line of code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.results&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Updated file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;whee!&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ---- event handler ---- //</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#btn-click&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// grab the value from the input box after the button click</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
</span><span class='line'>    <span class="c1">// display value within the browser&#39;s JS console</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span>
</span><span class='line'>    <span class="c1">// add the value to the DOM</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.results&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h4>index.html</h4>

<p>Add the following lines just below the form:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;br&gt;</span>
</span><span class='line'><span class="nt">&lt;br&gt;</span>
</span><span class='line'><span class="c">&lt;!-- inputted text after button click --&gt;</span>
</span><span class='line'><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;results&quot;</span><span class="nt">&gt;&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>What&#8217;s going on?</h3>

<p><code>$(".results").append(input);</code> adds the value of the input variable to the DOM between the <code>&lt;p&gt;</code> tags that have the class name &#8220;results&#8221; - which is exactly what we added to &#8220;index.html&#8221;: <code>&lt;p class="results"&gt;&lt;/p&gt;</code>.</p>

<p>Test this out in your browser. You should see this:</p>

<p><img src="https://raw.github.com/mjhea0/jquery-madlibs/master/images/dom.png" alt="dom" /></p>

<h4>main.js</h4>

<p>Before moving on, we need to make one last update to &#8220;main.js&#8221;. Did you notice how each of the words were placed in the DOM next to one another. That looks a bit sloppy. We could add a list to organize it. But let&#8217;s just display only the last submitted word.</p>

<p>Before:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.results&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>After:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.results&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>I&#8217;m sure you can guess what this method does. If not, test it out. Test it out, regardless. :)</p>

<p><strong><em>That&#8217;s it for the basics. Next, let&#8217;s move on to adding the Mad Libs functionality.</em></strong></p>

<h2>Step 5: Update the Form and Add the Story</h2>

<p>First, expand the form:</p>

<h4>index.html</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- start form --&gt;</span>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;questions&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Please fill out the following!<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;hr&gt;</span>
</span><span class='line'>  <span class="nt">&lt;form</span> <span class="na">role=</span><span class="s">&quot;form&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;person&quot;</span><span class="nt">&gt;</span>Boy&#39;s Name<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;person&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control person&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter a boy&#39;s name ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;adjective&quot;</span><span class="nt">&gt;</span>Adjective<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;adjective&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control adjective&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter an adjective ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;noun&quot;</span><span class="nt">&gt;</span>Plural noun<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;noun&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control noun&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter a plural noun ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;insect&quot;</span><span class="nt">&gt;</span>An insect, plural<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;insect&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control insect&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter an insect, plural ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;noun2&quot;</span><span class="nt">&gt;</span>Plural noun<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;noun2&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control plural-noun&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter a plural noun ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;verb&quot;</span><span class="nt">&gt;</span>A verb ending in &quot;s&quot;<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;verb&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control verb&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter a verb ending in &quot;</span><span class="na">s</span><span class="err">&quot;</span> <span class="err">..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/form&gt;</span>
</span><span class='line'>  <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">&quot;btn-click&quot;</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary btn-lg&quot;</span><span class="nt">&gt;</span>Generate!<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>  <span class="nt">&lt;hr&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="c">&lt;!-- end form --&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>What&#8217;s going on?</h3>

<p>Here we added a new form with both labels and inputs. I also updated the page title, <code>&lt;title&gt;Morning Mad Libs&lt;/title&gt;</code>, and removed <code>&lt;h1&gt;Hello, World!&lt;/h1&gt;</code>.</p>

<p>Go ahead and update the <code>max-width</code> of the <code>container</code> in the CSS file to 500px: <code>max-width: 500px;</code>.</p>

<p>Check out the file in the browser:</p>

<p><img src="https://raw.github.com/mjhea0/jquery-madlibs/master/images/form.png" alt="form" /></p>

<h4>index.html</h4>

<p>Next, remove this code-</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;br&gt;</span>
</span><span class='line'><span class="nt">&lt;br&gt;</span>
</span><span class='line'><span class="c">&lt;!-- inputted text after button click --&gt;</span>
</span><span class='line'><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;results&quot;</span><span class="nt">&gt;&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>-and in it&#8217;s place add the story:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- start story --&gt;</span>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;story&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Mad with the Libs<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;hr&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h3&gt;</span>I&#39;m in love with <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;person&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>. He&#39;s so <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;adjective&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>! He has big flat <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;noun&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>, and when our <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;insect&quot;</span><span class="nt">&gt;&lt;/span&gt;</span> meet, I get <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;noun2&quot;</span><span class="nt">&gt;&lt;/span&gt;</span> in my stomach. I&#39;ve fallen for him like a ton of <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;verb&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>, and he shuffles for me, too. But I think he&#39;s got another girlfriend. What should I do?<span class="nt">&lt;/h3&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="c">&lt;!-- end story --&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Updated file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="c">&lt;!-- stylesheets --&gt;</span>
</span><span class='line'>    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;http://netdna.bootstrapcdn.com/bootswatch/3.0.3/united/bootstrap.min.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;all&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;css/main.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;all&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;title&gt;</span>Morning Mad Libs<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="c">&lt;!-- start form --&gt;</span>
</span><span class='line'>      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;questions&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;h1&gt;</span>Please fill out the following!<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>        <span class="nt">&lt;hr&gt;</span>
</span><span class='line'>        <span class="nt">&lt;form</span> <span class="na">role=</span><span class="s">&quot;form&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;person&quot;</span><span class="nt">&gt;</span>Boy&#39;s Name<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">for=</span><span class="s">&quot;person&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control person&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter a boy&#39;s name ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;adjective&quot;</span><span class="nt">&gt;</span>Adjective<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">for=</span><span class="s">&quot;adjective&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control adjective&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter an adjective ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;noun&quot;</span><span class="nt">&gt;</span>Plural noun<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;noun&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control noun&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter a plural noun ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;insect&quot;</span><span class="nt">&gt;</span>An insect, plural<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;insect&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control insect&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter an insect, plural ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;noun2&quot;</span><span class="nt">&gt;</span>Plural noun<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;noun2&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control plural-noun&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter a plural noun ..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;verb&quot;</span><span class="nt">&gt;</span>A verb ending in &quot;s&quot;<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;verb&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control verb&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter a verb ending in &quot;</span><span class="na">s</span><span class="err">&quot;</span> <span class="err">..&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/form&gt;</span>
</span><span class='line'>        <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">&quot;btn-click&quot;</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary btn-lg&quot;</span><span class="nt">&gt;</span>Generate!<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>        <span class="nt">&lt;hr&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="c">&lt;!-- end form --&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="c">&lt;!-- start story --&gt;</span>
</span><span class='line'>      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;story&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;h1&gt;</span>Mad with the Libs<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>        <span class="nt">&lt;hr&gt;</span>
</span><span class='line'>        <span class="nt">&lt;h3&gt;</span>I&#39;m in love with <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;person&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>. He&#39;s so <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;adjective&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>! He has big flat <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;noun&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>, and when our <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;insect&quot;</span><span class="nt">&gt;&lt;/span&gt;</span> meet, I get <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;noun2&quot;</span><span class="nt">&gt;&lt;/span&gt;</span> in my stomach. I&#39;ve fallen for him like a ton of <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;verb&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>, and he shuffles for me, too. But I think he&#39;s got another girlfriend. What should I do?<span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="c">&lt;!-- end story --&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="c">&lt;!-- scripts --&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://code.jquery.com/jquery-1.10.2.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/main.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>What&#8217;s going on?</h3>

<p>Notice the <code>&lt;span&gt;</code> tags. The actual words will be inserted between them once the user clicks the button. Notice how the classes for each span matches the input id in the form. This is not required, but it just makes the naming consistent.</p>

<p>Check it out in your browser.</p>

<h2>Step 6: Update the jQuery</h2>

<p>Now we need to expand our JavaScript file so that upon the event (button click), we grab all the values, then insert them between the empty <code>&lt;span&gt;</code> tags.</p>

<h4>main.js</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;whee!&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ---- event handler ---- //</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#btn-click&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// grab the values from the input boxes, then append them to the DOM</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.person&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.person&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.adjective&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.adjective&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.noun&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.noun&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.insect&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.insect&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.noun2&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.plural-noun&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.verb&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.verb&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>What&#8217;s going on?</h3>

<p>Just like in the previous code -</p>

<ol>
<li><code>.val()</code> grabs the value from the form inputs.</li>
<li><code>.empty()</code> removes any text from that specific class in the story.</li>
<li><code>.append()</code> then adds the new value to the story.</li>
</ol>


<p>This time I did not assign the values to variables; instead I used the inputted values as parameters for the <code>.append()</code> method.</p>

<p>Test this out. Did it work? Were the values added to the story? If all went well, they should have been.</p>

<h4>main.js</h4>

<p>Now, before we move on, let&#8217;s add some more functionality:</p>

<ol>
<li>First, we do not want the story to be initially displayed - <code>$("#story").hide();</code></li>
<li>Next, we want to show the story after the button click - $(&#8220;#story&#8221;).show(); - and empty the form&#8217;s input boxes - <code>$(':input').val('');</code>.</li>
<li>Finally, let&#8217;s go ahead and hit all the questions after the form is submitted so the user can just focus on the story - <code>$("#questions").hide();</code>.</li>
</ol>


<p>Update main.js with those additional methods:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// hide the story from view</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#story&quot;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ---- event handler ---- //</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#btn-click&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// grab the values from the input boxes, then append them to the DOM</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.person&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.person&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.adjective&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.adjective&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.noun&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.noun&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.insect&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.insect&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.noun2&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.plural-noun&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.verb&quot;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input.verb&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// show the story</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#story&quot;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// empty the form&#39;s values</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;:input&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// hide the questions</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#questions&quot;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let&#8217;s test out the functionality again. Enter values into the form and press Generate. You should see the following if all went well:</p>

<p><img src="https://raw.github.com/mjhea0/jquery-madlibs/master/images/story.png" alt="story" /></p>

<blockquote><p>Please note: Instead of using jQuery, <code>$("#story").hide();</code> to hide the story, you could also use CSS - <code>#story {display: none;}</code></p></blockquote>

<h2>Step 7: Handle Another Event</h2>

<p>Okay. Everything looks good. But what happens if the user wants to play again? Sure s/he could refresh the page, but let&#8217;s make it easier by adding another event handler.</p>

<h4>main.js</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#play-btn&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#questions&quot;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#story&quot;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Can you tell what&#8217;s happening here? Look at previous jQuery code that we added before if you need an explanation.</p>

<h4>index.html</h4>

<p>Finally, add in a button with the an id of <code>play-btn</code> right before the closing div, <code>&lt;/div&gt;</code> in the story section:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary btn-lg&quot;</span> <span class="na">id=</span><span class="s">&quot;play-btn&quot;</span><span class="nt">&gt;</span>Play Again?<span class="nt">&lt;/button&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="https://raw.github.com/mjhea0/jquery-madlibs/master/images/story2.png" alt="story2" /></p>

<p>Test time.</p>

<h2>All done?</h2>

<p>Test the program out again. If all works out well, run along and play with your bestest of friends.</p>

<ol>
<li>Try it here - <a href="http://www.backwardsteps.com/madlibs/">http://backwardsteps.com/madlibs/</a>.</li>
<li>Grab the repo here - <a href="http://github.com/mjhea0/jquery-madlibs">http://github.com/mjhea0/jquery-madlibs</a></li>
</ol>


<h2>Challenges</h2>

<p>Too easy? Need some challenges?</p>

<ol>
<li>As with all projects/problems, there are several ways of solving them. Implement a new means.</li>
<li>Add unit and functional tests. Coverage too. What could you test? The question section is hidden after the button click. The event handler on the button click doesn&#8217;t fire unless all input boxes contain text.</li>
<li>Allow users to add their own stories. Think about what type of medium you could use to store the data. JSON, perhaps? Then where would you store the JSON file? LocalStorage? MongoDB?</li>
<li>Make it easy for two people to play one game together. One person would enter his/her answers, which would be stored. The inputs would clear. Then the next person would do the same. Finally, both stories would appear. Double the amount of laughs.</li>
<li>ENTER button. How could you make it so the user could either click the button or press ENTER? (Add another even for the button click or move the submit button into the form tags and add a <code>.preventDefault()</code> method to the JS file).</li>
<li>Could <code>.toggle()</code> be used somehow instead of two different betweens? Maybe you could toggle the question to hide and the story to show, then vice-versa, with the same button?</li>
</ol>


<p>What else?</p>

<h2>Too hard? Start with the basics.</h2>

<p>Read over the first four steps again make sure to write the actual code. DO NOT copy and paste. Read over it again if you have to for further understanding, then try to implement the Mad Libs game on your own, without looking at the remaining steps.</p>

<p>Have fun. Cheers!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/7/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/5/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/04/09/testing-angularjs-with-protractor-and-karma-part-1/">Testing AngularJS with Protractor and Karma - part 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/06/node-with-docker-continuous-integration-and-delivery/">Node with Docker - continuous integration and delivery</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/12/postgresql-and-nodejs/">PostgreSQL and NodeJS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/05/sublime-text-for-web-developers/">Sublime Text for Web Developers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/31/local-authentication-with-passport-and-express-4/">User Authentication with Passport and Express 4</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/analytics/'>analytics (8)</a></li>
<li class='category'><a href='/blog/categories/angular/'>angular (4)</a></li>
<li class='category'><a href='/blog/categories/crowdfunding/'>crowdfunding (1)</a></li>
<li class='category'><a href='/blog/categories/docker/'>docker (1)</a></li>
<li class='category'><a href='/blog/categories/excel/'>excel (3)</a></li>
<li class='category'><a href='/blog/categories/finance/'>finance (2)</a></li>
<li class='category'><a href='/blog/categories/frontend/'>frontend (1)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (1)</a></li>
<li class='category'><a href='/blog/categories/github/'>github (1)</a></li>
<li class='category'><a href='/blog/categories/meteor/'>meteor (1)</a></li>
<li class='category'><a href='/blog/categories/news/'>news (2)</a></li>
<li class='category'><a href='/blog/categories/node/'>node (12)</a></li>
<li class='category'><a href='/blog/categories/python/'>python (11)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>ruby (3)</a></li>
<li class='category'><a href='/blog/categories/startups/'>startups (3)</a></li>
<li class='category'><a href='/blog/categories/sublime/'>sublime (2)</a></li>

  </ul>
</section><section>
  <h1>About Me</h1>
  <p>A little something about me.</p>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Michael Herman <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>, customized with <a href="https://github.com/mjhea0/whiterspace">whiterspace</a>.</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'michaelherman';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  <script type="text/javascript" src="//s3.amazonaws.com/scripts.hellobar.com/4bda7d5a1c9bd6b6b8382efaf71e4fccbcf180ce.js"></script>
</body>
</html>
