<div class="highlight"><pre><span class="k">function</span> addListener<span class="o">(</span>port<span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> new Promise<span class="o">((</span>resolve, reject<span class="o">)</span> <span class="o">=</span>&gt; <span class="o">{</span>
    var <span class="nv">params</span> <span class="o">=</span> <span class="o">{</span>
      DefaultActions: <span class="o">[</span>
        <span class="o">{</span>
          TargetGroupArn: DEFAULT_TARGET_GROUP_ARN,
          Type: <span class="s2">&quot;forward&quot;</span>
        <span class="o">}</span>
      <span class="o">]</span>,
      LoadBalancerArn: LOAD_BALANCER_ARN,
      Port: port,
      Protocol: <span class="s2">&quot;HTTP&quot;</span>
    <span class="o">}</span><span class="p">;</span>
    elbv2.createListener<span class="o">(</span>params, <span class="o">(</span>err, data<span class="o">)</span> <span class="o">=</span>&gt; <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span>err<span class="o">)</span> <span class="o">{</span> reject<span class="o">(</span>err<span class="o">)</span><span class="p">;</span> <span class="o">}</span>
      resolve<span class="o">(</span>data<span class="o">)</span><span class="p">;</span>
    <span class="o">})</span><span class="p">;</span>
  <span class="o">})</span><span class="p">;</span>
<span class="o">}</span>
</pre></div>