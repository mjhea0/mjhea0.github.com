<div class="highlight"><pre>get_listener_priority<span class="o">()</span> <span class="o">{</span>
	<span class="nb">echo</span> <span class="s2">&quot;Getting listener priority...&quot;</span>
  <span class="k">if</span> <span class="nv">length</span><span class="o">=</span><span class="k">$(</span>aws elbv2 describe-rules --listener-arn arn:aws:elasticloadbalancing:us-east-1:046505967931:listener/app/ecs/1dec50e459068da0/e78a1bac4963dfaf <span class="p">|</span> <span class="nv">$JQ</span> <span class="s1">&#39;del(.Rules[] | select(.Priority == &quot;default&quot;)) | .Rules | max_by(.Priority) | .Priority&#39;</span><span class="k">)</span><span class="p">;</span> <span class="k">then</span>
		<span class="nv">length</span><span class="o">=</span><span class="k">$((</span><span class="nv">$length</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
    <span class="nb">echo</span> <span class="s2">&quot;Listener priority: $length&quot;</span>
  <span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&quot;Failed to get target group arn.&quot;</span>
    <span class="k">return</span> 1
  <span class="k">fi</span>
<span class="o">}</span>
</pre></div>