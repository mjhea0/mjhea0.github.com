<div class="highlight"><pre><span class="nx">Commit</span> <span class="nx">and</span> <span class="nx">push</span> <span class="nx">your</span> <span class="nx">code</span> <span class="nx">to</span> <span class="nx">GitHub</span> <span class="nx">to</span> <span class="nx">trigger</span> <span class="nx">a</span> <span class="k">new</span> <span class="nx">Circle</span> <span class="nx">build</span><span class="p">.</span> <span class="nx">Once</span> <span class="nx">done</span><span class="p">,</span> <span class="nx">ensure</span> <span class="nx">the</span> <span class="nx">images</span> <span class="nx">are</span> <span class="nx">up</span> <span class="nx">on</span> <span class="nx">ECS</span> <span class="kd">with</span> <span class="nx">the</span> <span class="nx">appropriate</span> <span class="nx">tag</span><span class="o">:</span>

<span class="p">[</span><span class="o">!</span><span class="p">[</span><span class="nx">aws</span> <span class="nx">ecr</span> <span class="nx">image</span> <span class="nx">push</span><span class="p">](</span><span class="err">/images/blog/on-demand-environments/aws-ecr-image-push.png)](/images/blog/on-demand-environments/aws-ecr-image-push.png)</span>

<span class="err">###</span> <span class="nx">Task</span> <span class="nx">Definitions</span>

<span class="nx">A</span> <span class="p">[</span><span class="nx">Task</span> <span class="nx">Definition</span><span class="p">](</span><span class="nx">http</span><span class="o">:</span><span class="c1">//docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definitions.html) is used to create an application from one or more containers. It&#39;s similar to a Docker Compose file.</span>

<span class="nx">Steps</span><span class="o">:</span>

<span class="mi">1</span><span class="p">.</span> <span class="nx">Create</span> <span class="nx">Task</span> <span class="nx">Definition</span> <span class="nx">JSON</span> <span class="nx">files</span>
<span class="mi">1</span><span class="p">.</span> <span class="nx">Update</span> <span class="nx">script</span> <span class="nx">to</span> <span class="nx">create</span> <span class="nx">and</span> <span class="nx">register</span> <span class="nx">Task</span> <span class="nx">Definitions</span>

<span class="err">####</span> <span class="nx">Create</span> <span class="nx">JSON</span> <span class="nx">files</span>

<span class="nx">Create</span> <span class="nx">a</span> <span class="k">new</span> <span class="nx">directory</span> <span class="nx">called</span> <span class="s2">&quot;tasks&quot;</span> <span class="nx">within</span> <span class="s2">&quot;ecs&quot;</span><span class="p">,</span> <span class="nx">and</span> <span class="nx">then</span> <span class="nx">add</span> <span class="nx">the</span> <span class="nx">following</span> <span class="nx">files</span><span class="o">:</span>

<span class="mi">1</span><span class="p">.</span> <span class="o">*</span><span class="nx">users</span><span class="o">-</span><span class="nx">review_task</span><span class="p">.</span><span class="nx">json</span><span class="o">*</span>
<span class="mi">1</span><span class="p">.</span> <span class="o">*</span><span class="nx">movies</span><span class="o">-</span><span class="nx">review_task</span><span class="p">.</span><span class="nx">json</span><span class="o">*</span>
<span class="mi">1</span><span class="p">.</span> <span class="o">*</span><span class="nx">web</span><span class="o">-</span><span class="nx">review_task</span><span class="p">.</span><span class="nx">json</span><span class="o">*</span>

<span class="err">#####</span> <span class="nx">Users</span> <span class="o">-</span> <span class="o">*</span><span class="nx">users</span><span class="o">-</span><span class="nx">review_task</span><span class="p">.</span><span class="nx">json</span><span class="o">*</span>
</pre></div>