<div class="highlight"><pre><span class="l-Scalar-Plain">version</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">2</span>

<span class="l-Scalar-Plain">jobs</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">build</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">docker</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">docker:17.03.2-ce-git</span>
    <span class="l-Scalar-Plain">working_directory</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~/microservice-movies</span>
    <span class="l-Scalar-Plain">environment</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">NODE_ENV</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">test</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">REACT_APP_USERS_SERVICE_URL</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://localhost:3000</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">REACT_APP_MOVIES_SERVICE_URL</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://localhost:3001</span>
    <span class="l-Scalar-Plain">parallelism</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
    <span class="l-Scalar-Plain">steps</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">checkout</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">setup_remote_docker</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">reusable</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
          <span class="l-Scalar-Plain">exclusive</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">run</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Install dependencies</span>
          <span class="l-Scalar-Plain">command</span><span class="p-Indicator">:</span> <span class="p-Indicator">|</span>
            <span class="no">apk add --no-cache \</span>
              <span class="no">py-pip=9.0.0-r1 \</span>
              <span class="no">bash \</span>
              <span class="no">jq \</span>
              <span class="no">curl \</span>
              <span class="no">nodejs</span>
            <span class="no">pip install \</span>
              <span class="no">docker-compose==1.12.0 \</span>
              <span class="no">awscli==1.11.76</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">run</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Build Docker images</span>
          <span class="l-Scalar-Plain">command</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">docker-compose -f docker-compose-review.yml build</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">run</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Spin up Docker containers</span>
          <span class="l-Scalar-Plain">command</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">docker-compose -f docker-compose-review.yml up -d</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">run</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Test the user service</span>
          <span class="l-Scalar-Plain">command</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">docker-compose -f docker-compose-review.yml run users-service-review npm test</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">run</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Test the movies service</span>
          <span class="l-Scalar-Plain">command</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">docker-compose -f docker-compose-review.yml run movies-service-review npm test</span>
</pre></div>