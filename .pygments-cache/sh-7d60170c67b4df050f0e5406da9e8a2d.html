<div class="highlight"><pre><span class="c"># set the environment variables</span>
<span class="nv">$ </span><span class="nb">export </span><span class="nv">NODE_ENV</span><span class="o">=</span><span class="nb">test</span>
<span class="nv">$ </span><span class="nb">export </span><span class="nv">REACT_APP_USERS_SERVICE_URL</span><span class="o">=</span>http://localhost:3000
<span class="nv">$ </span><span class="nb">export </span><span class="nv">REACT_APP_MOVIES_SERVICE_URL</span><span class="o">=</span>http://localhost:3001

<span class="c"># build the images</span>
docker-compose -f docker-compose-review.yml build

<span class="c"># sanity check 1</span>
<span class="nv">$ </span>docker-compose -f docker-compose-review.yml images

      Container                        Repository                   Tag       Image Id      Size
-------------------------------------------------------------------------------------------------
movies-db-review        microservicemovies_movies-db-review        latest   dc207cb7074a   <span class="m">256</span> MB
movies-service-review   microservicemovies_movies-service-review   latest   a294f59b2229   <span class="m">684</span> MB
swagger-review          microservicemovies_swagger-review          latest   a6b0516e7b5e   <span class="m">657</span> MB
users-db-review         microservicemovies_users-db-review         latest   d3863016969b   <span class="m">256</span> MB
users-service-review    microservicemovies_users-service-review    latest   62b60c33fdc3   <span class="m">687</span> MB
web-service-review      microservicemovies_web-service-review      latest   b7e7dcc25abd   <span class="m">762</span> MB

<span class="c"># spin up the containers</span>
<span class="nv">$ </span>docker-compose -f docker-compose-review.yml up -d

<span class="c"># sanity check 2</span>
<span class="nv">$ </span>docker-compose -f docker-compose-review.yml ps
Name                       Command              State           Ports
--------------------------------------------------------------------------------------
movies-db-review        docker-entrypoint.sh postgres   Up      0.0.0.0:5434-&gt;5432/tcp
movies-service-review   npm start                       Up      0.0.0.0:3001-&gt;3000/tcp
swagger-review          npm start                       Up      0.0.0.0:3003-&gt;3001/tcp
users-db-review         docker-entrypoint.sh postgres   Up      0.0.0.0:5433-&gt;5432/tcp
users-service-review    npm start                       Up      0.0.0.0:3000-&gt;3000/tcp
web-service-review      pushstate-server build          Up      0.0.0.0:3007-&gt;9000/tcp

<span class="c"># run the db migrations and seed the db</span>
<span class="nv">$ </span>sh init_db-review.sh

<span class="c"># sanity check 3</span>
<span class="nv">$ </span>sh <span class="nb">test</span>-review.sh
</pre></div>